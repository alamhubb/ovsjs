# Test-Volar é¡¹ç›®æ¶æ„è¯¦è§£

## ğŸ›ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         åº”ç”¨å±‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   OVS    â”‚  â”‚ObjectScripâ”‚  â”‚LangServerâ”‚  â”‚  Vite   â”‚       â”‚
â”‚  â”‚  è¯­è¨€    â”‚  â”‚   è¯­è¨€    â”‚  â”‚   LSP    â”‚  â”‚ Plugin  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç¼–è¯‘å™¨å±‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              Slime (JavaScript AST å·¥å…·é“¾)            â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚      â”‚
â”‚  â”‚  â”‚slime-ast â”‚  â”‚slime-    â”‚  â”‚slime-    â”‚           â”‚      â”‚
â”‚  â”‚  â”‚  (ç±»å‹)  â”‚  â”‚parser    â”‚  â”‚generator â”‚           â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åŸºç¡€å±‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚         Subhuti (Parser ç”Ÿæˆå™¨æ¡†æ¶)                   â”‚      â”‚
â”‚  â”‚  - è£…é¥°å™¨å®šä¹‰è§„åˆ™                                     â”‚      â”‚
â”‚  â”‚  - é€’å½’ä¸‹é™è§£æ                                       â”‚      â”‚
â”‚  â”‚  - CST ç”Ÿæˆ                                           â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ æ¨¡å—è¯¦è§£

### 1. Subhuti - Parser ç”Ÿæˆå™¨æ¡†æ¶

**å®šä½ï¼š** åŸºç¡€è®¾æ–½å±‚

**èŒè´£ï¼š**
- æä¾› Parser åŸºç±»
- å®ç°è£…é¥°å™¨ç³»ç»Ÿ
- æä¾›è§£æåŸè¯­ï¼ˆOrã€Manyã€Optionï¼‰
- ç”Ÿæˆ CST

**æ ¸å¿ƒç±»ï¼š**
```typescript
SubhutiParser          // Parser åŸºç±»
SubhutiLexer           // è¯æ³•åˆ†æå™¨
SubhutiCst             // CST èŠ‚ç‚¹
SubhutiMatchToken      // Token åŒ¹é…å™¨
```

**ä½¿ç”¨è€…ï¼š**
- Es5Parser
- Es6Parser
- OvsParser
- ObjectScriptParser

---

### 2. Slime - JavaScript AST å·¥å…·é“¾

**å®šä½ï¼š** ç¼–è¯‘å™¨å±‚

#### 2.1 slime-ast

**èŒè´£ï¼š** AST ç±»å‹å®šä¹‰å’Œå·¥å…·

**æ ¸å¿ƒå†…å®¹ï¼š**
```typescript
// ç±»å‹å®šä¹‰ï¼ˆåŸºäº ESTreeï¼‰
SlimeProgram
SlimeStatement
SlimeExpression
SlimeDeclaration
// ... 100+ ç§èŠ‚ç‚¹ç±»å‹

// å·¥å…·ç±»
SlimeAstUtil {
  createProgram()
  createExpression()
  createStatement()
  // ... 100+ åˆ›å»ºæ–¹æ³•
}

// ç±»å‹æšä¸¾
SlimeAstType {
  Program = 'Program'
  ExpressionStatement = 'ExpressionStatement'
  // ... 100+ ç±»å‹
}
```

#### 2.2 slime-parser

**èŒè´£ï¼š** JavaScript è¯­æ³•è§£æ

**æ ¸å¿ƒç±»ï¼š**
```typescript
Es5Parser              // ES5 è¯­æ³•ï¼ˆåŸºç¡€ï¼‰
  â”œâ”€ Statement()       // è¯­å¥
  â”œâ”€ Expression()      // è¡¨è¾¾å¼
  â”œâ”€ Literal()         // å­—é¢é‡
  â””â”€ ...               // 100+ è§„åˆ™

Es6Parser extends Es5Parser  // ES6+ è¯­æ³•
  â”œâ”€ ArrowFunction()   // ç®­å¤´å‡½æ•°
  â”œâ”€ ClassDeclaration() // ç±»å£°æ˜
  â”œâ”€ TemplateLiteral() // æ¨¡æ¿å­—ç¬¦ä¸²
  â””â”€ ...               // 50+ æ–°è§„åˆ™

SlimeCstToAst          // CST â†’ AST è½¬æ¢
  â”œâ”€ toProgram()
  â”œâ”€ createStatementAst()
  â”œâ”€ createExpressionAst()
  â””â”€ ...               // 100+ è½¬æ¢æ–¹æ³•
```

#### 2.3 slime-generator

**èŒè´£ï¼š** AST â†’ JavaScript ä»£ç 

**æ ¸å¿ƒç±»ï¼š**
```typescript
SlimeGenerator {
  static generate(ast, tokens): {code, mapping}
  
  private static generatorNode(node)
  private static generatorExpression(node)
  private static generatorStatement(node)
  // ... 100+ ç”Ÿæˆæ–¹æ³•
}
```

---

### 3. OVS - è¯­è¨€å®ç°

**å®šä½ï¼š** åº”ç”¨å±‚

**å®Œæ•´çš„ç¼–è¯‘æµç¨‹ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. è¯æ³•åˆ†æ (SubhutiLexer)                                  â”‚
â”‚    hello.ovs â†’ Tokens                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. è¯­æ³•åˆ†æ (OvsParser)                                     â”‚
â”‚    Tokens â†’ CST                                             â”‚
â”‚    - è¯†åˆ« div { }                                           â”‚
â”‚    - è¯†åˆ« if/for ç­‰æ§åˆ¶æµ                                   â”‚
â”‚    - è¯†åˆ«è¡¨è¾¾å¼è¯­å¥                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. è¯­æ³•è½¬æ¢ (OvsCstToSlimeAst)                              â”‚
â”‚    CST â†’ JavaScript AST                                     â”‚
â”‚    - div { } â†’ IIFE                                         â”‚
â”‚    - ExpressionStatement â†’ children.push()                  â”‚
â”‚    - ä¿ç•™æ§åˆ¶æµ                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. æ·»åŠ  import (ensureOvsAPIImport)                         â”‚
â”‚    è‡ªåŠ¨æ·»åŠ  import OvsAPI                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. ä»£ç ç”Ÿæˆ (SlimeGenerator)                                â”‚
â”‚    AST â†’ JavaScript ä»£ç                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. ä»£ç æ ¼å¼åŒ– (Prettier)                                    â”‚
â”‚    æ ¼å¼åŒ–è¾“å‡ºä»£ç                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1 æ ¸å¿ƒæ–‡ä»¶

**OvsParser.ts**
```typescript
@Subhuti
export class OvsParser extends Es6Parser {
  // å®šä¹‰ OVS ç‰¹æœ‰è¯­æ³•
  @SubhutiRule
  OvsRenderDomViewDeclaration() { }
  
  @SubhutiRule
  OvsLexicalBinding() { }
  
  // é‡å†™ AssignmentExpression æ”¯æŒ OVS è¯­æ³•
  @SubhutiRule
  AssignmentExpression() { }
}
```

**OvsCstToSlimeAstUtil.tsï¼ˆæ ¸å¿ƒï¼‰**
```typescript
export class OvsCstToSlimeAst extends SlimeCstToAst {
  // è®¡æ•°å™¨ï¼šæ ‡è®°æ˜¯å¦åœ¨ div { } å†…
  private ovsRenderDomViewDepth = 0
  
  // è½¬æ¢ div { }
  createOvsRenderDomViewDeclarationAst(cst) {
    this.ovsRenderDomViewDepth++
    try {
      // 1. è½¬æ¢ StatementList
      // 2. ç”Ÿæˆ IIFE
      // 3. è¿”å› CallExpression
    } finally {
      this.ovsRenderDomViewDepth--
    }
  }
  
  // é‡å†™ ExpressionStatement å¤„ç†
  createExpressionStatementAst(cst) {
    if (this.ovsRenderDomViewDepth > 0) {
      // è½¬æ¢ä¸º children.push(expr)
    } else {
      // ä¿æŒåŸæ ·
    }
  }
}
```

**index.tsï¼ˆVite æ’ä»¶ï¼‰**
```typescript
export async function vitePluginOvsTransform(code, filename, prettify) {
  // 1. è¯æ³•åˆ†æ
  const tokens = lexer.lexer(code)
  
  // 2. è¯­æ³•åˆ†æ
  const cst = parser.Program()
  
  // 3. è¯­æ³•è½¬æ¢
  let ast = OvsCstToSlimeAstUtil.toProgram(cst)
  
  // 4. æ·»åŠ  import
  ast = ensureOvsAPIImport(ast)
  
  // 5. ä»£ç ç”Ÿæˆ
  const result = SlimeGenerator.generator(ast, tokens)
  
  // 6. æ ¼å¼åŒ–
  if (prettify) {
    result.code = await prettier.format(result.code)
  }
  
  return result
}

export default function vitePluginOvs(): Plugin {
  return {
    name: 'vite-plugin-ovs',
    async transform(code, id) {
      if (!id.endsWith('.ovs')) return
      const res = await vitePluginOvsTransform(code, id, true)
      return { code: res.code }
    }
  }
}
```

---

## ğŸ”‘ å…³é”®è®¾è®¡å†³ç­–

### å†³ç­– 1ï¼šç»§æ‰¿ vs ç»„åˆ

**é€‰æ‹©ï¼š** ç»§æ‰¿ Es6Parser

**åŸå› ï¼š**
- å¤ç”¨æ‰€æœ‰ JavaScript è¯­æ³•
- åªéœ€æ·»åŠ  OVS ç‰¹æœ‰è¯­æ³•
- ä»£ç é‡å‡å°‘ 90%

### å†³ç­– 2ï¼šè®¡æ•°å™¨ vs é€’å½’

**é€‰æ‹©ï¼š** è®¡æ•°å™¨æœºåˆ¶

**åŸå› ï¼š**
- ä»£ç ç®€å•ï¼ˆåªéœ€ä¸€ä¸ªå˜é‡ï¼‰
- è‡ªåŠ¨ä¼ é€’ï¼ˆå®ä¾‹å˜é‡ï¼‰
- æ€§èƒ½å¥½ï¼ˆæ•´æ•°æ“ä½œï¼‰

### å†³ç­– 3ï¼šIIFE vs æ‰‹åŠ¨ç®¡ç†

**é€‰æ‹©ï¼š** IIFE è‡ªåŠ¨éš”ç¦»

**åŸå› ï¼š**
- åˆ©ç”¨ JavaScript ä½œç”¨åŸŸ
- æ— éœ€æ‰‹åŠ¨å‘½åï¼ˆchildren_1, children_2ï¼‰
- ä»£ç æ›´ç®€æ´

### å†³ç­– 4ï¼šAST æ“ä½œ vs å­—ç¬¦ä¸²å¤„ç†

**é€‰æ‹©ï¼š** AST æ“ä½œ

**åŸå› ï¼š**
- ç±»å‹å®‰å…¨
- æ˜“äºæ“ä½œ
- å¯å¤ç”¨å·¥å…·
- ä¸æ˜“å‡ºé”™

### å†³ç­– 5ï¼šè‡ªåŠ¨åŒ…è£… vs æ‰‹åŠ¨å¯¼å‡º

**é€‰æ‹©ï¼š** æ‰‹åŠ¨å¯¼å‡ºï¼ˆæœ€ç»ˆæ–¹æ¡ˆï¼‰

**åŸå› ï¼š**
- æ›´çµæ´»
- åƒæ™®é€š JS æ–‡ä»¶
- å¼€å‘è€…æ§åˆ¶
- æ”¯æŒå¤šç§å¯¼å‡ºæ–¹å¼

---

## ğŸ“ˆ æ€§èƒ½ç‰¹å¾

### ç¼–è¯‘æ—¶æ€§èƒ½

| æ–‡ä»¶å¤§å° | ç¼–è¯‘æ—¶é—´ | å†…å­˜å ç”¨ |
|---------|---------|---------|
| < 1KB   | < 10ms  | < 10MB  |
| 1-10KB  | 10-50ms | 10-20MB |
| 10-100KB| 50-200ms| 20-50MB |

### è¿è¡Œæ—¶æ€§èƒ½

- **é›¶å¼€é”€**ï¼šç¼–è¯‘æ—¶å¤„ç†ï¼Œè¿è¡Œæ—¶ç›´æ¥æ‰§è¡Œ
- **ä¸æ‰‹å†™ä»£ç ç›¸åŒ**ï¼šç”Ÿæˆçš„æ˜¯æ ‡å‡† JavaScript

---

## ğŸ¯ é¡¹ç›®ç‰¹ç‚¹æ€»ç»“

### æŠ€æœ¯ç‰¹ç‚¹

1. **å®Œæ•´çš„ç¼–è¯‘å™¨**ï¼šä»è¯æ³•åˆ°ä»£ç ç”Ÿæˆ
2. **å¯æ‰©å±•æ¶æ„**ï¼šç»§æ‰¿å’Œç»„åˆ
3. **ç±»å‹å®‰å…¨**ï¼šå…¨ç¨‹ TypeScript
4. **å·¥å…·é“¾å®Œå–„**ï¼šParser + AST + Generator
5. **å®ç”¨æ€§å¼º**ï¼šå¯ç›´æ¥ç”¨äºç”Ÿäº§

### å­¦ä¹ ä»·å€¼

1. **ç¼–è¯‘åŸç†å®è·µ**ï¼šç†è®ºåˆ°å®è·µ
2. **è®¾è®¡æ¨¡å¼åº”ç”¨**ï¼šè£…é¥°å™¨ã€è®¿é—®è€…ã€å·¥å‚
3. **å·¥ç¨‹æ¶æ„**ï¼šMonorepoã€æ¨¡å—åŒ–
4. **ç°ä»£å·¥å…·é“¾**ï¼šViteã€TypeScriptã€Prettier

### åˆ›æ–°ç‚¹

1. **è®¡æ•°å™¨æœºåˆ¶**ï¼šç®€å•ä¼˜é›…çš„çŠ¶æ€ç®¡ç†
2. **IIFE éš”ç¦»**ï¼šå·§å¦™åˆ©ç”¨ JavaScript ç‰¹æ€§
3. **Parser ç»§æ‰¿**ï¼šå¤ç”¨ JavaScript è¯­æ³•
4. **çµæ´»å¯¼å‡º**ï¼šä¸å¼ºåˆ¶ç»„ä»¶ç»“æ„

---

## ğŸ“ å­¦ä¹ å»ºè®®

### ç¬¬ 1 å‘¨ï¼šç†è§£æ•´ä½“

- è¿è¡Œé¡¹ç›®
- ä¿®æ”¹ç¤ºä¾‹
- æŸ¥çœ‹ç¼–è¯‘ç»“æœ

### ç¬¬ 2 å‘¨ï¼šç†è§£ç¼–è¯‘æµç¨‹

- è°ƒè¯•ä»£ç 
- æ‰“å° CST/AST
- ç†è§£è½¬æ¢è¿‡ç¨‹

### ç¬¬ 3 å‘¨ï¼šæ·±å…¥æºç 

- é˜…è¯» OvsParser
- é˜…è¯» OvsCstToSlimeAst
- ç†è§£è®¡æ•°å™¨æœºåˆ¶

### ç¬¬ 4 å‘¨ï¼šå®è·µæ‰©å±•

- æ·»åŠ æ–°è¯­æ³•
- å®ç°æ–°è½¬æ¢
- åˆ›å»ºè‡ªå·±çš„è¯­è¨€

---

## ğŸ”— ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£
- ECMAScript è§„èŒƒ
- ESTree AST è§„èŒƒ
- Vite æ’ä»¶æ–‡æ¡£

### æ¨èé˜…è¯»
- ã€Šç¼–è¯‘åŸç†ã€‹ï¼ˆé¾™ä¹¦ï¼‰
- ã€ŠJavaScript è¯­è¨€ç²¾ç²¹ã€‹
- ã€Šè®¾è®¡æ¨¡å¼ã€‹

### ç›¸å…³é¡¹ç›®
- Babelï¼ˆJavaScript ç¼–è¯‘å™¨ï¼‰
- TypeScriptï¼ˆç±»å‹ç³»ç»Ÿï¼‰
- SWCï¼ˆRust å®ç°çš„ç¼–è¯‘å™¨ï¼‰

---

è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ª**å®Œæ•´çš„ã€å¯è¿è¡Œçš„ã€ç”Ÿäº§çº§åˆ«çš„ç¼–è¯‘å™¨å®ç°**ï¼Œå±•ç¤ºäº†å¦‚ä½•ä»é›¶åˆ›å»ºä¸€ä¸ªç¼–ç¨‹è¯­è¨€å¹¶é›†æˆåˆ°ç°ä»£å‰ç«¯å·¥å…·é“¾ä¸­ã€‚

