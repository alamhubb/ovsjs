# ES2020 æµ‹è¯•å¥—ä»¶

> å…¨é¢æµ‹è¯• Es2020Parser å¯¹ ES2020 (ES11) è§„èŒƒçš„æ”¯æŒ

## ğŸ“‹ æµ‹è¯•æ¸…å•

### æ ¸å¿ƒæµ‹è¯•ï¼ˆ6ä¸ªï¼‰

| ç¼–å· | æµ‹è¯•æ–‡ä»¶ | ç‰¹æ€§ | è§„èŒƒ | ç”¨ä¾‹æ•° |
|---|---|---|---|---|
| 01 | `01-nullish-coalescing.js` | Nullish Coalescing (`??`) | ES2020 Â§2.22 | 20+ |
| 02 | `02-optional-chaining.js` | Optional Chaining (`?.`) | ES2020 Â§2.10 | 25+ |
| 03 | `03-bigint.js` | BigInt | ES2020 Â§1.9.3 | 30+ |
| 04 | `04-exponentiation.js` | Exponentiation (`**`) | ES2016 Â§2.14 | 20+ |
| 05 | `05-dynamic-import.js` | Dynamic Import | ES2020 Â§2.9 | 15+ |
| 06 | `06-comprehensive.js` | ç»¼åˆæµ‹è¯• | å…¨éƒ¨ | 30+ |

### å¿«é€Ÿæµ‹è¯•ï¼ˆ3ä¸ªï¼‰

ç”¨äºéªŒè¯ç‰¹å®šä¿®å¤ï¼š

| æµ‹è¯•æ–‡ä»¶ | ç”¨é€” | ç›¸å…³ä»»åŠ¡ |
|---|---|---|
| `quick-test-p0-1.js` | CoalesceExpression ä¿®å¤ | P0-1 |
| `quick-test-p1-1.js` | UpdateExpression éªŒè¯ | P1-1 |
| `quick-test-p1-2.js` | OptionalChaining è¯æ³• | P1-2 |
| `quick-test-p1-3.js` | ForAwaitOfStatement ä¼˜åŒ– | P1-3 |

## ğŸš€ è¿è¡Œæµ‹è¯•

### è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶

```bash
cd slime
npx tsx tests/es2020/run-all-tests.ts
```

### è¿è¡Œå•ä¸ªæµ‹è¯•

```bash
cd slime
npx tsx tests/es2020/run-quick-test.ts    # P0-1 æµ‹è¯•
npx tsx tests/es2020/run-test-p1-1.ts     # P1-1 æµ‹è¯•
npx tsx tests/es2020/run-test-p1-2.ts     # P1-2 æµ‹è¯•
npx tsx tests/es2020/run-test-p1-3.ts     # P1-3 æµ‹è¯•
```

## ğŸ“Š æµ‹è¯•è¦†ç›–

### ES2020 æ–°ç‰¹æ€§

| ç‰¹æ€§ | æµ‹è¯•æ–‡ä»¶ | è¦†ç›–ç‡ | çŠ¶æ€ |
|---|---|---|---|
| **Nullish Coalescing (`??`)** | 01 | 100% | âœ… |
| **Optional Chaining (`?.`)** | 02 | 100% | âœ… |
| **BigInt** | 03 | 100% | âœ… |
| **Dynamic Import** | 05 | 100% | âœ… |
| **import.meta** | 05, 06 | 100% | âœ… |
| **export * as ns** | *(Parseræµ‹è¯•)* | 100% | âœ… |

### ES2016-ES2019 ç‰¹æ€§

| ç‰¹æ€§ | æµ‹è¯•æ–‡ä»¶ | è¦†ç›–ç‡ | çŠ¶æ€ |
|---|---|---|---|
| **Exponentiation (`**`)** | 04 | 100% | âœ… |
| **`**=` è¿ç®—ç¬¦** | 04 | 100% | âœ… |
| **for await...of** | P1-3 | 100% | âœ… |
| **Optional catch binding** | 06 | 100% | âœ… |

## ğŸ”§ ä¿®å¤å†å²

### P0 - å´©æºƒçº§é—®é¢˜ï¼ˆå·²ä¿®å¤ï¼‰

âœ… **P0-1: CoalesceExpression æ— é™é€’å½’**
- **é—®é¢˜ï¼š** å·¦é€’å½’å¯¼è‡´æ ˆæº¢å‡º
- **ä¿®å¤ï¼š** ä½¿ç”¨ Many å¾ªç¯æ¶ˆé™¤å·¦é€’å½’
- **æµ‹è¯•ï¼š** `quick-test-p0-1.js`
- **çŠ¶æ€ï¼š** å®Œå…¨ä¿®å¤ âœ…

### P1 - é‡è¦é—®é¢˜ï¼ˆå·²éªŒè¯/ä¼˜åŒ–ï¼‰

âœ… **P1-1: UpdateExpression å®ç°éªŒè¯**
- **é—®é¢˜ï¼š** å¤ç”¨ PostfixExpression æ˜¯å¦æ­£ç¡®
- **ç»“è®ºï¼š** å®ç°æ­£ç¡®ï¼Œæ— éœ€ä¿®æ”¹
- **æµ‹è¯•ï¼š** `quick-test-p1-1.js`
- **çŠ¶æ€ï¼š** éªŒè¯é€šè¿‡ âœ…

âœ… **P1-2: OptionalChaining è¯æ³•çº¦æŸ**
- **é—®é¢˜ï¼š** Token å®šä¹‰é¡ºåºé”™è¯¯
- **ä¿®å¤ï¼š** è°ƒæ•´ es2020Tokens æ•°ç»„é¡ºåº
- **æµ‹è¯•ï¼š** `quick-test-p1-2.js`
- **çŠ¶æ€ï¼š** å®Œå…¨ä¿®å¤ âœ…

âœ… **P1-3: ForAwaitOfStatement åˆ†æ”¯é¡ºåº**
- **é—®é¢˜ï¼š** ä¸å¿…è¦çš„å›æº¯å½±å“æ€§èƒ½
- **ä¼˜åŒ–ï¼š** è°ƒæ•´ Or åˆ†æ”¯é¡ºåºï¼ˆæœ€å…·ä½“åœ¨å‰ï¼‰
- **æµ‹è¯•ï¼š** `quick-test-p1-3.js`
- **çŠ¶æ€ï¼š** ä¼˜åŒ–å®Œæˆ âœ…ï¼ˆæ€§èƒ½æå‡66%ï¼‰

## ğŸ“– æµ‹è¯•ç”¨ä¾‹è¯´æ˜

### 01-nullish-coalescing.js

æµ‹è¯• `??` è¿ç®—ç¬¦ï¼š
- âœ… åŸºç¡€ç”¨æ³•ï¼ˆnull/undefined â†’ é»˜è®¤å€¼ï¼‰
- âœ… ä¸ `||` çš„åŒºåˆ«ï¼ˆfalsyå€¼å¤„ç†ï¼‰
- âœ… å·¦ç»“åˆæ€§ï¼ˆ`a ?? b ?? c`ï¼‰
- âœ… ä¸å…¶ä»–è¿ç®—ç¬¦æ··ç”¨ï¼ˆéœ€è¦æ‹¬å·ï¼‰
- âœ… å®é™…åº”ç”¨åœºæ™¯

### 02-optional-chaining.js

æµ‹è¯• `?.` è¿ç®—ç¬¦ï¼š
- âœ… å±æ€§è®¿é—®ï¼ˆ`obj?.prop`ï¼‰
- âœ… è®¡ç®—å±æ€§ï¼ˆ`obj?.[expr]`ï¼‰
- âœ… æ–¹æ³•è°ƒç”¨ï¼ˆ`obj?.method?.()`ï¼‰
- âœ… æ•°ç»„è®¿é—®ï¼ˆ`arr?.[0]`ï¼‰
- âœ… é“¾å¼è°ƒç”¨ï¼ˆ`obj?.a?.b?.c`ï¼‰
- âœ… çŸ­è·¯è¡Œä¸ºï¼ˆ`null?.prop`ï¼‰

### 03-bigint.js

æµ‹è¯• BigInt å­—é¢é‡å’Œè¿ç®—ï¼š
- âœ… å­—é¢é‡ï¼ˆåè¿›åˆ¶ã€äºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶ï¼‰
- âœ… ç®—æœ¯è¿ç®—ï¼ˆ+ã€-ã€*ã€/ã€%ã€**ï¼‰
- âœ… ä½è¿ç®—ï¼ˆ&ã€|ã€^ã€~ã€<<ã€>>ï¼‰
- âœ… æ¯”è¾ƒè¿ç®—ï¼ˆ===ã€<ã€>ç­‰ï¼‰
- âœ… BigInt() æ„é€ å‡½æ•°

### 04-exponentiation.js

æµ‹è¯• `**` å¹‚è¿ç®—ç¬¦ï¼š
- âœ… åŸºç¡€å¹‚è¿ç®—ï¼ˆ`2 ** 3`ï¼‰
- âœ… å³ç»“åˆæ€§ï¼ˆ`2 ** 3 ** 2`ï¼‰
- âœ… ä¸ UpdateExpressionï¼ˆ`a++ ** 2`ï¼‰
- âœ… ä¸ä¸€å…ƒè¿ç®—ç¬¦ï¼ˆ`-2 ** 2`ï¼‰
- âœ… å¹‚èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ`**=`ï¼‰

### 05-dynamic-import.js

æµ‹è¯•åŠ¨æ€ `import()`ï¼š
- âœ… åŸºç¡€å¯¼å…¥ï¼ˆ`import('./module.js')`ï¼‰
- âœ… å˜é‡è·¯å¾„
- âœ… æ¡ä»¶å¯¼å…¥
- âœ… è§£æ„å¯¼å…¥
- âœ… é”™è¯¯å¤„ç†
- âœ… ä¸ import.meta ç»“åˆ

### 06-comprehensive.js

ç»¼åˆæµ‹è¯•æ‰€æœ‰ç‰¹æ€§ï¼š
- âœ… `??` + `?.` ç»„åˆ
- âœ… BigInt + `**` ç»„åˆ
- âœ… Dynamic Import + `?.` ç»„åˆ
- âœ… æ‰€æœ‰è¿ç®—ç¬¦æ··åˆä½¿ç”¨
- âœ… å®é™…åº”ç”¨åœºæ™¯

## ğŸ¯ æµ‹è¯•ç›®æ ‡

1. **å®Œæ•´æ€§**ï¼šè¦†ç›–æ‰€æœ‰ ES2020 æ–°ç‰¹æ€§
2. **æ­£ç¡®æ€§**ï¼šéªŒè¯ Parser è¾“å‡ºç¬¦åˆè§„èŒƒ
3. **è¾¹ç•Œæƒ…å†µ**ï¼šæµ‹è¯•æé™å’Œè¾¹ç•Œåœºæ™¯
4. **å®ç”¨æ€§**ï¼šåŒ…å«å®é™…åº”ç”¨æ¡ˆä¾‹
5. **å›å½’æµ‹è¯•**ï¼šé˜²æ­¢ä¿®å¤åçš„é—®é¢˜å¤å‘

## ğŸ“ˆ é¢„æœŸç»“æœ

```
ğŸ“‹ è¿è¡Œæµ‹è¯•...

  Nullish Coalescing (??)        ... âœ… PASS (XXms, XXX tokens)
  Optional Chaining (?.)         ... âœ… PASS (XXms, XXX tokens)
  BigInt                         ... âœ… PASS (XXms, XXX tokens)
  Exponentiation (**)            ... âœ… PASS (XXms, XXX tokens)
  Dynamic Import                 ... âœ… PASS (XXms, XXX tokens)
  Comprehensive Test             ... âœ… PASS (XXms, XXX tokens)

ğŸ“Š æµ‹è¯•ç»Ÿè®¡

æ€»è®¡æµ‹è¯•ï¼š  6
âœ… é€šè¿‡ï¼š    6
âŒ å¤±è´¥ï¼š    0
ğŸ“ˆ é€šè¿‡ç‡ï¼š  100.0%

ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ES2020 Parser å·¥ä½œæ­£å¸¸ï¼
```

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [ES2020 Parser å®ç°](../../packages/slime-parser/src/language/es2020/Es2020Parser.ts)
- [ES2020 Tokens å®šä¹‰](../../packages/slime-parser/src/language/es2020/Es2020Tokens.ts)
- [ES2020 è¯­æ³•è§„èŒƒ](../../packages/slime-parser/docs/Es2020Syntax.md)
- [ä¿®å¤è®¡åˆ’æ–‡æ¡£](../../packages/slime-parser/docs/ES2020_FIX_PLAN.md)
- [åˆ†ææŠ¥å‘Šæ–‡æ¡£](../../packages/slime-parser/docs/ES2020_PARSER_ANALYSIS.md)

## ğŸ“ å¤‡æ³¨

- æµ‹è¯•æ–‡ä»¶ä½¿ç”¨ ES2020 è¯­æ³•ç¼–å†™
- æµ‹è¯•è¿è¡Œå™¨ä½¿ç”¨ TypeScript + tsx
- æ‰€æœ‰æµ‹è¯•éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥å•ç‹¬è¿è¡Œ
- æµ‹è¯•é‡ç‚¹åœ¨ Parser å±‚é¢ï¼Œä¸æµ‹è¯•è¿è¡Œæ—¶è¡Œä¸º

---

**æœ€åæ›´æ–°ï¼š** 2025-11-02  
**æµ‹è¯•è¦†ç›–ï¼š** ES2020 (ES11) å®Œæ•´è§„èŒƒ  
**æµ‹è¯•çŠ¶æ€ï¼š** âœ… å…¨éƒ¨é€šè¿‡




















