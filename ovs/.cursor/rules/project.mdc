---
description: OVSé¡¹ç›®ä¿¡æ¯ - å£°æ˜å¼UIæ¡†æ¶é¡¹ç›®è§„èŒƒä¸å¼€å‘æŒ‡ï¿½?alwaysApply: true
---

# OVS - å£°æ˜å¼UIæ¡†æ¶é¡¹ç›®

## é¡¹ç›®å®šä½
å£°æ˜å¼UIæ¡†æ¶ï¼Œä½¿ç”¨ç±»ä¼¼Flutter/SwiftUIçš„è¯­æ³•å¼€å‘Vueåº”ç”¨ï¼Œæä¾›é›¶è¿è¡Œæ—¶å¼€é”€çš„ç¼–è¯‘æ—¶è½¬æ¢

**æ ¸å¿ƒä»·å€¼ï¼š**
- è®©å‰ç«¯å¼€å‘è€…ç”¨æ›´ç›´è§‚çš„è¯­æ³•ç¼–å†™UI
- ç¼–è¯‘æ—¶è½¬æ¢ï¼Œé›¶è¿è¡Œæ—¶å¼€é”€
- å®Œæ•´çš„TypeScriptæ”¯æŒå’Œç±»å‹å®‰ï¿½?
## å½“å‰é˜¶æ®µ
STAGE_4_OPTIMIZATION

## å½“å‰çŠ¶æ€
### âœ… å·²å®ŒæˆåŠŸèƒ½
- âœ… **æ ¸å¿ƒç¼–è¯‘å™¨**ï¼š100% å®Œæˆ
- âœ… **æ™ºèƒ½IIFEä¼˜åŒ–**ï¼šå®Œæˆï¼ˆç®€å•è§†å›¾é›¶å¼€é”€ï¼‰
- âœ… **ç»„ä»¶ç³»ç»Ÿ**ï¼šå®Œæˆï¼ˆovsViewç»„ä»¶å£°æ˜ã€props/childå±æ€§ä¼ é€’ï¼‰
- âœ… **`#{}` ä¸æ¸²æŸ“å—**ï¼šå®Œæˆï¼ˆä»£ç éš”ç¦»ï¼‰
- âœ… **æºç æ˜ å°„ï¼ˆSource Mapï¼‰**ï¼š100% å‡†ç¡®ç‡ï¼ˆ51/51æµ‹è¯•é€šè¿‡ï¼‰
- âœ… **Language Serveræ¡†æ¶**ï¼šå®Œæˆï¼ˆåŸºäºVolarï¼Œå·²é›†æˆæºç æ˜ å°„ï¼‰
- âœ… **ç¼–è¯‘è§„åˆ™å®Œæ•´å®ç°**ï¼šå®Œæˆï¼ˆè§„åˆ™4æ— å¯¼å‡ºIIFEåŒ…è£¹çš„å®Œæ•´å®ç° - v0.2.2ï¼‰
- ç‰ˆæœ¬ï¼šv0.2.2
- å¼€å‘æœåŠ¡å™¨ï¼šhttp://localhost:5175

### âš ï¸ æœªå®ŒæˆåŠŸèƒ½ï¼ˆé˜»å¡ç”Ÿäº§ä½¿ç”¨ï¼‰
- âŒ **VSCodeæ‰©å±•é›†æˆ**ï¼šLanguage Serveræœªè¿æ¥åˆ°VSCodeæ‰©å±•ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
- âŒ **ä»£ç è¡¥å…¨ï¼ˆCompletionï¼‰**ï¼šéœ€è¦å®Œæˆæ‰©å±•é›†æˆåæ‰èƒ½ä½¿ç”¨
- âŒ **è·³è½¬åˆ°å®šä¹‰ï¼ˆGo to Definitionï¼‰**ï¼šéœ€è¦å®Œæˆæ‰©å±•é›†æˆåæ‰èƒ½ä½¿ç”¨
- âŒ **Hoveræç¤º**ï¼šéœ€è¦å®Œæˆæ‰©å±•é›†æˆåæ‰èƒ½ä½¿ç”¨
- âŒ **å®æ—¶é”™è¯¯æ£€æŸ¥**ï¼šéœ€è¦å®Œæˆæ‰©å±•é›†æˆåæ‰èƒ½ä½¿ç”¨

### ğŸ¯ å½“å‰å¯ç”¨å¼€å‘æ–¹å¼
- âœ… æµè§ˆå™¨å¼€å‘ï¼šä½¿ç”¨Viteå¼€å‘æœåŠ¡å™¨ï¼ˆhttp://localhost:5175ï¿½?- âœ… ç¼–è¯‘å’Œè¿è¡Œï¼šå®Œå…¨å¯ç”¨
- âœ… æºç æ˜ å°„ï¼šä¸ºæœªæ¥çš„LSPæ”¯æŒå‡†å¤‡å°±ç»ª
- âŒ IDEæ™ºèƒ½æç¤ºï¼šå°šä¸å¯ç”¨

## æµ‹è¯•å·¥å…·ï¼ˆæ˜ å°„è¯Šæ–­ï¼‰
```bash
# æºç æ˜ å°„æµ‹è¯•å¥—ä»¶ï¼ˆ51ä¸ªæµ‹è¯•åœºæ™¯ï¼‰
npx tsx test-mapping-suite.ts

# å•ä¸ªæµ‹è¯•è°ƒè¯•
npx tsx test-mapping-conditional-debug.ts
```

**æµ‹è¯•ç»“æœï¼š** 51/51 å…¨éƒ¨é€šè¿‡ï¼Œå‡†ç¡®ç‡ 100% âœ…ï¼ˆ2025-10-30 å®Œæˆï¼‰

**æµ‹è¯•åœºæ™¯åˆ†ç±»ï¼š**
- 00-10ï¼šåŸºç¡€æµ‹è¯•ï¼ˆå­—é¢é‡ã€å˜é‡ã€å…ƒç´ ã€åµŒå¥—ã€æ¡ä»¶ã€å¾ªç¯ã€å‡½æ•°ã€æ·±åº¦åµŒå¥—ã€å¤æ‚è¡¨è¾¾å¼ã€æ··åˆåœºæ™¯ï¼‰
- 11-20ï¼šåŸºç¡€è¯­æ³•æ‰©å±•ï¼ˆå¤šå˜é‡ã€å­—ç¬¦ä¸²æ‹¼æ¥ã€æ•°ç»„ã€å¯¹è±¡ã€å±æ€§è®¿é—®ã€ç®­å¤´å‡½æ•°ã€æ¨¡æ¿å­—ç¬¦ä¸²ï¼‰
- 21-30ï¼šæ§åˆ¶æµå’Œè¿ç®—ç¬¦ï¼ˆif-elseã€while/forå¾ªç¯ã€ä¸‰å…ƒã€é€»è¾‘ã€æ¯”è¾ƒã€ä¸€å…ƒã€ç®—æœ¯ã€è‡ªå¢è‡ªå‡ï¼‰
- 31-40ï¼šé«˜çº§ç‰¹æ€§ï¼ˆè§£æ„ã€å±•å¼€ã€å¯é€‰é“¾ã€ç©ºå€¼åˆå¹¶ã€async/awaitã€classã€å¼‚å¸¸å¤„ç†ã€é«˜é˜¶å‡½æ•°ï¼‰
- 41-50ï¼šç»„ä»¶ç³»ç»Ÿå’Œç»¼åˆæµ‹è¯•ï¼ˆç»„ä»¶ã€propsã€childrenã€æ¡ä»¶æ¸²æŸ“ã€å¾ªç¯ã€åµŒå¥—ã€çŠ¶æ€ã€äº‹ä»¶ã€æ··åˆé«˜çº§åœºæ™¯ï¼‰
## ä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼ˆä¼˜å…ˆçº§æ’åºï¼‰

### P0 - ç´§æ€¥ï¼ˆç”¨æˆ·ä½“éªŒå±‚ï¼‰
**1. VSCodeæ‰©å±•é›†æˆ**ï¼ˆé¢„è®¡1-3å¤©ï¼‰
- [ ] å°† `langServer` è¿æ¥åˆ° `lsp-client-vscode` æ‰©å±•
- [ ] é…ç½®Language Serverå¯åŠ¨é€»è¾‘
- [ ] æµ‹è¯•åŸºç¡€åŠŸèƒ½ï¼šä»£ç è¡¥å…¨ã€è·³è½¬å®šä¹‰ã€Hoveræç¤º
- [ ] æœ¬åœ°å®‰è£…æµ‹è¯•
- **å®Œæˆåæ•ˆæœ**ï¼šå¯ä»¥åœ¨VSCodeä¸­è·å¾—å®Œæ•´çš„æ™ºèƒ½æç¤º

### P1 - é‡è¦ï¼ˆå®Œå–„ä½“éªŒï¼‰
**2. è¯­æ³•é«˜äº®ä¼˜åŒ–**
- [ ] æµ‹è¯•å’Œå®Œå–„ `syntaxes/ovs.tmLanguage.json`
- [ ] æ·»åŠ è¯­ä¹‰é«˜äº®ï¼ˆSemantic Tokensï¼‰

**3. é”™è¯¯è¯Šæ–­å¢å¼º**
- [ ] å®æ—¶ç¼–è¯‘é”™è¯¯æç¤º
- [ ] è¯­æ³•é”™è¯¯æ ‡è®°

### P2 - ä¼˜åŒ–ï¼ˆéé˜»å¡ï¼‰
**4. æ¸…ç†å’Œæ–‡æ¡£**
- [ ] æ¸…ç†ä¸´æ—¶æµ‹è¯•æ–‡ä»¶ï¼ˆtest-*.tsï¼‰
- [ ] å®Œå–„ç»„ä»¶æ–‡æ¡£å’Œç¤ºä¾‹

**5. å·²çŸ¥é™åˆ¶ä¿®å¤**
- [ ] é™¤æ³•è¿ç®—ç¬¦æ”¯æŒï¼ˆLexerå†²çªï¼‰
- [ ] Class constructorå‚æ•°ä¼˜åŒ–
- [ ] æ³¨é‡Šç¨³å®šæ€§æ”¹è¿›

### ğŸ¯ å…³é”®é‡Œç¨‹ç¢‘
- **å½“å‰**ï¼šæ ¸å¿ƒå¼•æ“å°±ç»ªï¼Œæºç æ˜ å°„100%
- **ä¸‹ä¸€ä¸ª**ï¼šå®ŒæˆVSCodeæ‰©å±•é›†æˆ â†’ å¯ç”Ÿäº§ä½¿ç”¨
- **æœ€ç»ˆ**ï¼šå‘å¸ƒVSCode marketplace
## ç«äº‰åŠ›åˆ†ï¿½?
### ï¿½?æŠ€æœ¯ä¼˜ï¿½?- **é›¶è¿è¡Œæ—¶å¼€é”€**ï¼šçº¯ç¼–è¯‘æ—¶è½¬æ¢ï¼Œæ€§èƒ½æ— æŸ
- **å®Œæ•´ç»„ä»¶ç³»ç»Ÿ**ï¼špropsã€slotsã€åµŒå¥—å®Œæ•´æ”¯ï¿½?- **æ™ºèƒ½ä¼˜åŒ–**ï¼šç®€å•è§†å›¾é›¶IIFEï¼Œå¤æ‚è§†å›¾å®Œæ•´æ”¯ï¿½?- **è¯­æ³•ç›´è§‚**ï¼šå£°æ˜å¼é£æ ¼ï¼Œç±»ä¼¼Flutter/SwiftUI
- **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´TypeScriptæ”¯æŒ

### âš ï¸ ä¸¥å³»æŒ‘æˆ˜
- **ç”Ÿæ€ç¼ºï¿½?*ï¼ˆæœ€å¤§é—®é¢˜ï¼‰ï¼šæ— IDEæ”¯æŒã€è°ƒè¯•å·¥å…·ã€ç»„ä»¶åº“ã€ç¤¾ï¿½?- **å¸‚åœºå®šä½æ¨¡ç³Š**ï¼šJSX/TSXç”Ÿæ€æˆç†Ÿï¼ŒVue SFCå®˜æ–¹æ¨è
- **å­¦ä¹ æˆæœ¬**ï¼šæ–°è¯­æ³•ã€è°ƒè¯•å›°éš¾ã€å›¢é˜Ÿåä½œæˆæœ¬é«˜
- **åŠŸèƒ½é™åˆ¶**ï¼šé™¤æ³•è¿ç®—ã€æ³¨é‡Šä¸ç¨³å®šã€å¤æ‚è¡¨è¾¾å¼æ”¯æŒæœ‰é™

### ğŸ’¡ å‘å±•æ–¹å‘å»ºè®®

**çŸ­æœŸï¿½?-6ä¸ªæœˆï¿½? å¿…éœ€åŸºç¡€è®¾æ–½**
1. **VSCodeæ’ä»¶**ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
   - è¯­æ³•é«˜äº®
   - é”™è¯¯æç¤º
   - æ™ºèƒ½è¡¥å…¨
   - Source Mapæ”¯æŒ

2. **æ ¸å¿ƒé™åˆ¶ä¿®å¤**
   - é™¤æ³•è¿ç®—ç¬¦æ”¯ï¿½?   - æ³¨é‡Šç¨³å®šï¿½?   - é”™è¯¯æç¤ºä¼˜åŒ–

3. **æ–‡æ¡£å’Œç¤ºï¿½?*
   - 10+çœŸå®é¡¹ç›®ç¤ºä¾‹
   - JSX/Vue SFCè¿ç§»æŒ‡å—
   - æ€§èƒ½å¯¹æ¯”æ•°æ®

**ä¸­æœŸï¿½?-12ä¸ªæœˆï¿½? å·®å¼‚åŒ–å®šï¿½?*

**é€‰é¡¹Aï¼šAIä»£ç ç”Ÿæˆåœºæ™¯**
- OVSè¯­æ³•ç»“æ„åŒ–ï¼ŒAIæ›´å®¹æ˜“ç”Ÿï¿½?- æä¾›"è‡ªç„¶è¯­è¨€â†’OVS"å·¥å…·
- ç›®æ ‡ï¼šéç¨‹åºå‘˜ç”¨AIç”ŸæˆUI

**é€‰é¡¹Bï¼šå¿«é€ŸåŸå‹å·¥ï¿½?*
- å¯è§†åŒ–ç¼–è¾‘å™¨ ï¿½?OVSä»£ç åŒå‘åŒæ­¥
- ç±»ä¼¼Figmaâ†’Codeä½†è¯­æ³•æ›´ç®€ï¿½?- ç›®æ ‡ï¼šè®¾è®¡å¸ˆ/äº§å“ç»ç†å¿«é€ŸéªŒï¿½?
**é€‰é¡¹Cï¼šæ•™è‚²é¢†ï¿½?*
- è¯­æ³•ç®€å•ï¼Œé€‚åˆåˆå­¦ï¿½?- æä¾›åœ¨çº¿playground
- ç›®æ ‡ï¼šç¼–ç¨‹æ•™è‚²å¸‚ï¿½?
**é•¿æœŸï¿½?-2å¹´ï¼‰- è·¨æ¡†æ¶DSL**
- ç¼–è¯‘åˆ°React/Solid.js
- æˆä¸ºè·¨æ¡†æ¶çš„UIæè¿°è¯­è¨€

### ğŸ“Š ç°å®è¯„ä¼°

**æŠ€æœ¯å±‚ï¿½?*ï¼šâ­â­â­â­â˜† ï¿½?/5ï¼‰å®ç°ä¼˜ç§€ï¼Œæœ‰åˆ›æ–°
**ç”Ÿæ€å±‚ï¿½?*ï¼šâ­â˜†â˜†â˜†â˜† ï¿½?/5ï¼‰å‡ ä¹ä¸ºé›¶ï¼Œè‡´å‘½çŸ­æ¿
**å¸‚åœºå±‚é¢**ï¼šâ­â­â˜†â˜†â˜† ï¿½?/5ï¼‰å®šä½ä¸æ¸…æ™°ï¼Œç«äº‰æ¿€ï¿½?
**æ®‹é…·çœŸç›¸**ï¿½?- 90%çš„å‰ç«¯å¼€å‘è€…ä¸ä¼šåˆ‡æ¢åˆ°æ–°è¯­æ³•ï¼ˆé™¤éï¿½?0å€ä¼˜åŠ¿ï¼‰
- JSX/TSXå·²ç»"è¶³å¤Ÿï¿½?ï¼ˆç”Ÿï¿½?å·¥å…·+ä¹ æƒ¯ï¿½?- æ–°è¯­è¨€éœ€ï¿½?-5å¹´æ‰èƒ½å»ºç«‹ç”Ÿï¿½?
**å¯èƒ½çš„çªç ´ç‚¹**ï¿½?1. ä¸ä¸JSXæ­£é¢ç«äº‰ï¼Œæ‰¾å‚ç›´åœºæ™¯ï¼ˆAIç”Ÿæˆã€å¯è§†åŒ–ç¼–è¾‘ï¿½?2. é™ä½é—¨æ§›ï¼Œæä¾›JSXâ†”OVSè½¬æ¢å·¥å…·
3. æ€æ‰‹çº§ç‰¹æ€§ï¼Œæ‰¾åˆ°JSXåšä¸å¥½ä½†OVSèƒ½åšçš„åœºï¿½?
### ğŸ¯ æˆ˜ç•¥å»ºè®®

**å¦‚æœç›®æ ‡æ˜¯å­¦ï¿½?ç ”ç©¶**
- ï¿½?ç»§ç»­å®Œå–„ï¼Œä¼˜ç§€çš„ç¼–è¯‘å™¨å­¦ä¹ é¡¹ç›®
- ï¿½?å¯ä»¥å‘Paperæˆ–æŠ€æœ¯åšï¿½?- ï¿½?ä½œä¸ºPortfolioå±•ç¤ºæŠ€æœ¯èƒ½ï¿½?
**å¦‚æœç›®æ ‡æ˜¯å•†ä¸šåŒ–/æ¨å¹¿**
- âš ï¸ å…ˆåšVSCodeæ’ä»¶ï¼ˆå¿…éœ€ï¿½?- âš ï¸ å…ˆæ‰¾ï¿½?ä¸ªå‚ç›´åœºæ™¯ï¼ˆAIç”Ÿæˆï¼Ÿï¼‰
- âš ï¸ ä¸è¦ä¸JSXæ­£é¢ç«äº‰

**å¦‚æœç›®æ ‡æ˜¯ä¸ªï¿½?å°å›¢é˜Ÿä½¿ï¿½?*
- ï¿½?å›¢é˜Ÿå–œæ¬¢è¿™ç§è¯­æ³•å°±å¯ä»¥ç”¨
- âš ï¸ åšå¥½é•¿æœŸç»´æŠ¤çš„å‡†ï¿½?- âš ï¸ ç•™å¥½é€€è·¯ï¼ˆæ”¯æŒå¯¼å‡ºä¸ºJSXï¿½?
**å½“å‰é˜¶æ®µå»ºè®®**ï¿½?ä¼˜å…ˆå®ŒæˆVSCodeæ’ä»¶ï¼Œè¿™æ˜¯ä»»ä½•ç¼–ç¨‹è¯­è¨€çš„ç”Ÿå­˜åŸºç¡€ã€‚æ²¡æœ‰IDEæ”¯æŒï¼Œè¿è‡ªå·±ç”¨éƒ½è´¹åŠ²ï¼Œæ›´åˆ«è¯´æ¨å¹¿äº†ï¿½?
---

# ã€æ ¸å¿ƒéœ€æ±‚å±‚ï¿½?
## æ ¸å¿ƒåŠŸèƒ½ï¼ˆç”¨æˆ·èƒ½åšä»€ä¹ˆï¼‰
- **å£°æ˜å¼UIç¼–å†™**ï¼šç”¨ç®€æ´çš„è¯­æ³•ç¼–å†™å¤æ‚UI
- **ç»„ä»¶ç³»ç»Ÿ**ï¼šä½¿ç”¨ `ovsView` å£°æ˜å¯å¤ç”¨ç»„ä»¶
- **å±æ€§ä¼ é€’**ï¼šé€šè¿‡ state.props å¯¹è±¡ä¼ é€’ç»„ä»¶å±æ€§
- **å®Œæ•´JavaScriptæ”¯æŒ**ï¼šå‡½æ•°ã€å¾ªç¯ã€é¢å‘å¯¹è±¡ã€è¿ç®—ç¬¦ã€æ§åˆ¶æµ
- **æ™ºèƒ½å¯¼å‡ºç³»ç»Ÿ**ï¼šè‡ªåŠ¨è¯†åˆ«å¯¼å‡ºæ–¹å¼ï¼ˆé»˜è®¤ã€å‘½åã€è‡ªåŠ¨åŒ…è£¹ï¼‰
- **å®æ—¶å¼€å‘ä½“ï¿½?*ï¼šçƒ­æ›´æ–°ã€å³æ—¶ç¼–è¯‘é¢„ï¿½?- **ç±»å‹å®‰å…¨å¼€ï¿½?*ï¼šå®Œæ•´TypeScriptæ”¯æŒ

## äº¤äº’/æ¥å£ï¼ˆåŸºæœ¬æµç¨‹ã€å‘ˆç°æ–¹å¼ï¼‰
**å¼€å‘æµç¨‹ï¼š**
1. ç¼–å†™.ovsæ–‡ä»¶ ï¿½?2. è‡ªåŠ¨ç¼–è¯‘ä¸ºVueä»£ç  ï¿½?3. æµè§ˆå™¨å®æ—¶é¢„ï¿½?
**è¯­æ³•æ¥å£ï¿½?*
- OVSå…ƒç´ ï¼š`div { "content" }` 
- ç»„ä»¶å£°æ˜ï¼š`ovsView ComponentName (state) : rootElement { ... }`
- å±æ€§èµ‹å€¼ï¼š`name = value` ï¼ˆè‡ªåŠ¨æ”¶é›†åˆ° attrsï¿½?- æ¡ä»¶æ¸²æŸ“ï¼š`if (condition) { element }`
- å¾ªç¯æ¸²æŸ“ï¼š`for (item of list) { element }`
- å¯¼å‡ºæ¥å£ï¼š`export const/default`

## æŠ€æœ¯æ–¹å‘ï¼ˆè®¾å¤‡æ”¯æŒã€æ€§èƒ½è¦æ±‚ï¿½?**é»˜è®¤æŠ€æœ¯æ ˆï¿½?* OVS + Vue 3 + Vite + TypeScript + tsx
**è¿è¡Œç¯å¢ƒï¿½?*
- è®¾å¤‡ï¼šæ¡Œé¢æµè§ˆå™¨ä¼˜å…ˆï¼ˆChromeã€Firefoxã€Safariï¿½?- Node.jsï¿½?6+ï¼ˆæ”¯æŒtsxè¿è¡Œï¿½?- æ€§èƒ½ï¼šé›¶è¿è¡Œæ—¶å¼€é”€ï¼ˆç¼–è¯‘æ—¶è½¬æ¢ï¿½?
## æ•°æ®éœ€æ±‚ï¼ˆå­˜ä»€ä¹ˆã€æ€ä¹ˆå­˜ï¼‰
- **æºç æ–‡ä»¶**ï¿½?ovsæ ¼å¼ï¼ˆOVSè¯­æ³•ï¿½?- **ç¼–è¯‘è¾“å‡º**ï¼šJavaScript/TypeScriptä»£ç 
- **é…ç½®æ–‡ä»¶**ï¼špackage.jsonã€tsconfig.jsonã€vite.config.ts
- **æµ‹è¯•æ•°æ®**ï¼šæµ‹è¯•ç”¨ä¾‹ã€fixturesã€ç¤ºä¾‹ä»£ï¿½?- **æ–‡æ¡£**ï¼šREADMEã€ç”¨æˆ·æŒ‡å—ã€APIæ–‡æ¡£

## å®‰å…¨éœ€æ±‚ï¼ˆæ•æ„Ÿçº§åˆ«ã€æƒé™æ§åˆ¶ï¼‰
- **å®‰å…¨çº§åˆ«**ï¼šå¼€å‘å·¥å…·ï¼Œæ— æ•æ„Ÿæ•°ï¿½?- **ç¼–è¯‘å®‰å…¨**ï¼šè¯æ³•åˆ†æã€è¯­æ³•éªŒè¯ï¼Œé˜²æ­¢æ³¨å…¥æ”»å‡»
- **ä¾èµ–ç®¡ç†**ï¼šä½¿ç”¨npm/yarné”å®šç‰ˆæœ¬

## ä¼˜å…ˆçº§ï¼ˆç¬¬ä¸€ç‰ˆåšä»€ä¹ˆï¼‰
**P0-æ ¸å¿ƒåŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰ï¼š**
- ï¿½?åŸºç¡€OVSè¯­æ³•ï¼ˆdivã€h1ã€pç­‰å…ƒç´ ï¼‰
- ï¿½?å˜é‡å£°æ˜å’Œå¼•ï¿½?- ï¿½?æ¡ä»¶æ¸²æŸ“ï¼ˆifè¯­å¥ï¿½?- ï¿½?åµŒå¥—è§†å›¾

**P1-é«˜çº§åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰ï¼š**
- ï¿½?å‡½æ•°å£°æ˜å’Œç®­å¤´å‡½ï¿½?- ï¿½?å¾ªç¯ï¼ˆforã€whileï¿½?- ï¿½?ç®—æœ¯è¿ç®—ç¬¦ï¼ˆ+ï¿½?ï¿½?ï¿½?ï¿½?- ï¿½?æ™ºèƒ½å¯¼å‡ºç³»ç»Ÿ

**P2-ä¼˜åŒ–åŠŸèƒ½ï¼ˆè¿›è¡Œä¸­ï¼‰ï¼š**
- âš ï¸ é™¤æ³•è¿ç®—ç¬¦æ”¯æŒï¼ˆLexerå†²çªï¿½?- âš ï¸ ClassåŠŸèƒ½å®Œå–„ï¼ˆconstructorå‚æ•°ï¿½?- âš ï¸ æ³¨é‡Šç¨³å®šæ€§ä¼˜ï¿½?
---

# ã€ç»†èŠ‚å®ç°å±‚ï¿½?
## æŠ€æœ¯æ ˆè¯¦æƒ…
- **æ ¸å¿ƒæ¡†æ¶**ï¼šVue 3.5.12
- **ç¼–è¯‘å·¥å…·**ï¼šVite 7.1.7
- **ç±»å‹æ”¯æŒ**ï¼šTypeScript 5.8.3
- **è¿è¡Œç¯å¢ƒ**ï¼štsx 4.19.1ï¼ˆæ”¯æŒenumç­‰ç‰¹æ€§ï¼‰
- **è§£æï¿½?*ï¼šSubhuti 0.1.3ï¼ˆè¯æ³•åˆ†æï¼‰
- **ASTå·¥å…·**ï¼šSlimeç³»åˆ—ï¼ˆè¯­æ³•æ ‘ç”Ÿæˆï¿½?- **æµ‹è¯•æ¡†æ¶**ï¼šè‡ªå®šä¹‰æµ‹è¯•è¿è¡Œï¿½?
## æ¨¡å—æ¶æ„
```
ovs/
â”œâ”€â”€ src/                    # æ ¸å¿ƒç¼–è¯‘ï¿½?ï¿½?  â”œâ”€â”€ parser/            # è¯­æ³•åˆ†æï¿½?ï¿½?  â”œâ”€â”€ factory/           # ä»£ç ç”Ÿæˆå·¥å‚
ï¿½?  â”œâ”€â”€ model/             # ASTæ¨¡å‹
ï¿½?  â”œâ”€â”€ view/              # è§†å›¾æ¸²æŸ“
ï¿½?  â””â”€â”€ interface/         # ç±»å‹å®šä¹‰
â”œâ”€â”€ example/               # ç¤ºä¾‹é¡¹ç›®
â”œâ”€â”€ tests/                 # å®Œæ•´æµ‹è¯•å¥—ä»¶
â””â”€â”€ docs/                  # æŠ€æœ¯æ–‡ï¿½?```

## ç¼–è¯‘æµç¨‹
1. **è¯æ³•åˆ†æ**ï¼ˆSubhutiLexer + ovs6Tokensï¼‰â†’ Tokenæµï¼ˆè¯†åˆ«ovsViewå…³é”®å­—ï¼‰
2. **è¯­æ³•åˆ†æ**ï¼ˆOvsParserï¼‰â†’ CSTè¯­æ³•ï¿½? 
3. **è¯­æ³•è½¬æ¢**ï¼ˆOvsCstToSlimeAstï¼‰â†’ ASTæŠ½è±¡è¯­æ³•ï¿½?4. **å¯¼å…¥æ·»åŠ **ï¼ˆensureOvsAPIImportï¼‰â†’ æ·»åŠ  `import { h } from 'vue'`
5. **è¡¨è¾¾å¼åŒ…ï¿½?*ï¼ˆwrapTopLevelExpressionsï¼‰â†’ æ™ºèƒ½IIFEä¼˜åŒ–
6. **ä»£ç ç”Ÿæˆ**ï¼ˆSlimeGeneratorï¼‰â†’ æœ€ç»ˆJavaScriptä»£ç 

## æ™ºèƒ½å¯¼å‡ºè§„åˆ™
- **æœ‰export default**ï¼šä¿æŒåŸæ ·ï¼Œä¸åŒ…è£¹IIFE
- **æ— export default**ï¼šIIFEåŒ…è£¹æ‰€æœ‰è¡¨è¾¾å¼ï¼Œå£°æ˜ä¿æŒé¡¶ï¿½?- **export const**ï¼šåªè½¬æ¢OVSéƒ¨åˆ†ï¼Œä¿æŒå¯¼å‡ºç»“ï¿½?- **å¤šä¸ªè§†å›¾**ï¼šè¿”å›childrenæ•°ç»„

## LSPæ”¯æŒçŠ¶æ€ï¼ˆ2025-10-30ï¼‰

### âœ… å·²å®Œæˆï¼ˆåº•å±‚åŸºç¡€ï¼‰

**1. Source Mapç³»ç»Ÿ - 100% å®Œæˆ**
- å‡†ç¡®ç‡ï¼š100%ï¼ˆ51/51æµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡ï¼‰
- è¦†ç›–èŒƒå›´ï¼šæ‰€æœ‰JavaScriptè¯­æ³•ã€æ§åˆ¶æµã€ES6+ç‰¹æ€§ã€ç»„ä»¶ç³»ç»Ÿ
- åŠŸèƒ½ï¼šç²¾ç¡®æ˜ å°„OVSæºç ä½ç½®åˆ°ç”Ÿæˆçš„JavaScriptä»£ç ä½ç½®
- æ„ä¹‰ï¼šä¸ºLSPçš„"è·³è½¬åˆ°å®šä¹‰"ã€"Hoveræç¤º"ç­‰åŠŸèƒ½æä¾›æ ¸å¿ƒæ”¯æŒ

**2. Language Serveræ¡†æ¶ - å·²å®ç°**
- æ¡†æ¶ï¼šåŸºäºVolar 2.4.0ï¼ˆVueå®˜æ–¹LSPæ¡†æ¶ï¼‰
- ä½ç½®ï¼š`langServer/src/OvsLanguagePlugin.ts`
- åŠŸèƒ½ï¼šå·²é›†æˆæºç æ˜ å°„ï¼Œå¯å°†.ovsè½¬æ¢ä¸ºTypeScriptè™šæ‹Ÿä»£ç 
- çŠ¶æ€ï¼šæ ¸å¿ƒé€»è¾‘å®Œæˆï¼Œç­‰å¾…ä¸VSCodeæ‰©å±•é›†æˆ

### âŒ æœªå®Œæˆï¼ˆç”¨æˆ·ä½“éªŒå±‚ï¼‰

**3. VSCodeæ‰©å±•é›†æˆ - å°šæœªè¿æ¥**
- ç°çŠ¶ï¼š`lsp-client-vscode` è¿˜æ˜¯å¾®è½¯ç¤ºä¾‹æ¨¡æ¿ï¼Œæœªè¿æ¥åˆ°OVS Language Server
- é—®é¢˜ï¼šLanguage Serverå’ŒVSCodeæ‰©å±•ä¸¤è€…ç‹¬ç«‹ï¼Œæœªå»ºç«‹é€šä¿¡
- å½±å“ï¼šæ‰€æœ‰LSPåŠŸèƒ½ï¼ˆä»£ç è¡¥å…¨ã€è·³è½¬ã€Hoverç­‰ï¼‰å‡ä¸å¯ç”¨
- å·¥ä½œé‡ï¼šé¢„è®¡1-3å¤©å®ŒæˆåŸºç¡€é›†æˆ

### ğŸ“Š å®é™…å¯ç”¨æ€§è¯„ä¼°

**å½“å‰å¯ä»¥åšçš„ï¼š**
- âœ… ç¼–å†™OVSä»£ç å¹¶ç¼–è¯‘è¿è¡Œï¼ˆæµè§ˆå™¨å¼€å‘ç¯å¢ƒï¼‰
- âœ… æºç æ˜ å°„100%å‡†ç¡®ï¼ˆä¸ºLSPæ‰“ä¸‹åšå®åŸºç¡€ï¼‰
- âœ… ä½¿ç”¨Viteå¼€å‘æœåŠ¡å™¨çƒ­æ›´æ–°å¼€å‘

**å½“å‰ä¸èƒ½åšçš„ï¼š**
- âŒ VSCodeä¸­çš„ä»£ç è¡¥å…¨ï¼ˆCompletionï¼‰
- âŒ è·³è½¬åˆ°å®šä¹‰ï¼ˆGo to Definitionï¼‰
- âŒ æ‚¬åœæç¤ºï¼ˆHoverï¼‰
- âŒ å®æ—¶é”™è¯¯æ£€æŸ¥ï¼ˆDiagnosticsï¼‰
- âŒ é‡æ„åŠŸèƒ½ï¼ˆRenameã€Formatç­‰ï¼‰

### ğŸ¯ ç»“è®º

**æŠ€æœ¯å±‚é¢**ï¼šæ ¸å¿ƒå¼•æ“ï¼ˆç¼–è¯‘å™¨+æºç æ˜ å°„+Language Serverï¼‰å·²100%å°±ç»ª âœ…

**ç”¨æˆ·ä½“éªŒ**ï¼šè¿˜éœ€è¦å°†å¼•æ“"è£…è¿›VSCode"æ‰èƒ½è·å¾—æ™ºèƒ½æç¤º âš ï¸

**ä¸‹ä¸€æ­¥**ï¼šå®ŒæˆVSCodeæ‰©å±•é›†æˆï¼ˆP0ä¼˜å…ˆçº§ï¼‰ï¼Œé¢„è®¡1-3å¤©åå¯ç”Ÿäº§ä½¿ç”¨

## è¯­æ³•è§„èŒƒ

### æ”¯æŒçš„è¯­ï¿½?```javascript
// å˜é‡å£°æ˜
const/let/var declarations

// å‡½æ•°
function declarations
arrow functions (x) => x

// æ§åˆ¶ï¿½? 
if/else conditions
for/while loops

// è¿ç®—ï¿½?+, -, *, %, >, <, ===, !, &&, ||

// OVSå…ƒç´ 
div { content }
h1 { "title" }
p { variable }

// æ¡ä»¶æ¸²æŸ“
if (condition) { element }

// åµŒå¥—
div { div { div { "deep nesting" } } }
```

### å·²çŸ¥é™åˆ¶ä¸è§£å†³æ–¹ï¿½?
| é™åˆ¶ | çŠ¶ï¿½?| å½±å“ | æ›¿ä»£æ–¹æ¡ˆ |
|------|------|------|----------|
| **é™¤æ³•è¿ç®—ï¿½?`/`** | ï¿½?| Lexerå†²çªï¼ˆä¸æ³¨é‡Š `//`ï¿½?| ï¿½?`* 0.5` ä»£æ›¿ `/ 2` |
| **Class constructorå‚æ•°** | âš ï¸ | å‚æ•°æœ‰å°é—®é¢˜ï¼ŒåŸºæœ¬å¯ï¿½?| ç®€å•ä½¿ç”¨å¯ä»¥ï¼Œå¤æ‚åœºæ™¯ç”¨å¤–éƒ¨TS |
| **æ³¨é‡Šç¨³å®šï¿½?* | âš ï¸ | éƒ¨åˆ†åœºæ™¯ä¸ç¨³ï¿½?| ç”¨æœ‰æ„ä¹‰çš„å˜é‡åä»£æ›¿ |

**å·²ä¿®å¤çš„å†å²é—®é¢˜ï¿½?*
- ï¿½?Constructor with assignment statementsï¼ˆthis.x = 1ï¿½? å·²å®Œå…¨ä¿®ï¿½?- ï¿½?Export classæ”¯æŒ - å·²å®Œå…¨æ”¯ï¿½?- ï¿½?å‡½æ•°å‚æ•°ä¸¢å¤± - å·²ä¿®ï¿½?- ï¿½?äºŒå…ƒè¡¨è¾¾å¼æ”¯ï¿½?- å·²å®ï¿½?- ï¿½?Token type undefined - å·²ä¿®ï¿½?
## å¼€å‘å‘½ï¿½?```bash
# å¼€å‘æœåŠ¡å™¨
npm run dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆhttp://localhost:5173ï¿½?
# æµ‹è¯•
npm test                 # æ‰§è¡Œtest-runner.tsï¼ˆç»Ÿä¸€æµ‹è¯•å…¥å£ï¿½?npx tsx test-runner.ts   # ç›´æ¥æ‰§è¡Œæµ‹è¯•å…¥å£
npm run test:unit        # å•å…ƒæµ‹è¯•
npm run test:integration # é›†æˆæµ‹è¯•
npm run test:regression  # å›å½’æµ‹è¯•
npm run test:watch      # ç›‘å¬æ¨¡å¼

# æ„å»º
npm run build           # ç”Ÿäº§æ„å»º
npm run preview         # é¢„è§ˆæ„å»ºç»“æœ
```

## æ€§èƒ½ç‰¹ï¿½?
### æ ¸å¿ƒä¼˜åŒ–ï¼šæ™ºèƒ½IIFEç³»ç»Ÿ
**ç®€å•è§†å›¾ï¼ˆå®Œå…¨æ— IIFEï¿½?**
- æ¡ä»¶ï¼šè§†å›¾å†…éƒ¨åªåŒ…å«è¡¨è¾¾å¼ï¼Œæ— ä»»ä½•è¯­ï¿½?- ç¼–è¯‘ç»“æœï¼šç›´æ¥è°ƒï¿½?`OvsAPI.createVNode`ï¼Œæ— å‡½æ•°åŒ…è£¹
- æ€§èƒ½æå‡ï¼šå®Œå…¨é›¶å¼€é”€ï¼Œä»£ç é‡å‡å°‘40-50%

**å¤æ‚è§†å›¾ï¼ˆä¿ç•™IIFEï¿½?**
- æ¡ä»¶ï¼šè§†å›¾å†…éƒ¨åŒ…å«è¯­å¥ï¼ˆå˜é‡å£°æ˜ã€å¾ªç¯ã€æ¡ä»¶ç­‰ï¿½?- ç¼–è¯‘ç»“æœï¼šå®Œæ•´IIFEå‡½æ•°ï¼Œæ”¯æŒæ‰€æœ‰ES6ç‰¹ï¿½?- åŠŸèƒ½ï¼šä½œç”¨åŸŸéš”ç¦»ã€å®Œæ•´é€»è¾‘æ§åˆ¶èƒ½åŠ›

### æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”
| æŒ‡æ ‡ | ä¼˜åŒ–ï¿½?| ä¼˜åŒ–ï¿½?| æå‡ |
|-----|-------|-------|------|
| **åµŒå¥—IIFEæ•°é‡** | æ¯ä¸ªview 1ï¿½?| ç®€å•view: 0 | **-100%** ï¿½?|
| **ä»£ç è¡Œæ•°** | ~12ï¿½?| ~7ï¿½?| **-40%** |
| **è¿è¡Œæ—¶è°ƒï¿½?* | 4æ¬¡IIFE | 0ï¿½?ç®€ï¿½? | **é›¶å¼€é”€** |
| **å¯è¯»ï¿½?* | ä¸­ç­‰ | æé«˜ | **æ˜¾è‘—æå‡** |

### å…¶ä»–æ€§èƒ½ç‰¹ï¿½?- **é›¶è¿è¡Œæ—¶å¼€é”€**ï¼šç¼–è¯‘æ—¶è½¬æ¢ï¼Œæ— é¢å¤–è¿è¡Œæ—¶åº“
- **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´TypeScriptæ”¯æŒï¼Œç¼–è¯‘æ—¶ç±»å‹æ£€ï¿½?- **å®æ—¶çƒ­æ›´ï¿½?*ï¼šViteé©±åŠ¨çš„å¿«é€Ÿå¼€å‘ä½“ï¿½?- **ç¼–è¯‘é€Ÿåº¦**ï¿½? 100msï¼ˆä¸­ç­‰å¤æ‚åº¦ï¿½?- **åŒ…å¤§ï¿½?*ï¼šæ— é¢å¤–è¿è¡Œæ—¶åº“ä¾èµ–

## æµ‹è¯•è¦†ç›–

### æºç æ˜ å°„æµ‹è¯•ï¼š100%ï¿½?1/11ï¿½?2025-10-30 å®Œå…¨ä¿®å¤ï¼‰

**æµ‹è¯•åœºæ™¯ï¿½?*
- ï¿½?å•å­—é¢é‡ï¼ˆ00-single-literal.ovsï¿½?- ï¿½?å•å˜é‡ï¼ˆ01-single-variable.ovsï¿½?- ï¿½?ç®€å•å…ƒç´ ï¼ˆ02-simple-element.ovsï¿½?- ï¿½?å…ƒç´ ä¸­çš„å˜ï¿½?03-variable-in-element.ovsï¿½?- ï¿½?åµŒå¥—å…ƒç´ ï¼ˆ04-nested-elements.ovsï¿½?- ï¿½?æ¡ä»¶æ¸²æŸ“ï¼ˆ05-conditional-render.ovsï¿½?- ï¿½?ç®€å•å¾ªç¯ï¼ˆ06-simple-loop.ovsï¿½?- ï¿½?å‡½æ•°è°ƒç”¨ï¼ˆ07-function-call.ovsï¿½?- ï¿½?æ·±åº¦åµŒå¥—ï¼ˆ08-deep-nesting.ovsï¿½?- ï¿½?å¤æ‚è¡¨è¾¾å¼ï¼ˆ09-complex-expression.ovsï¿½?- ï¿½?æ··åˆåœºæ™¯ï¼ˆ10-mixed-scenario.ovsï¿½?
**ä¿®å¤å†…å®¹ï¼ˆSlimeGeneratorï¼‰ï¼š**
- é—®é¢˜ï¼š12å¤„ç›´æ¥ä¿®æ”¹`generateCode`æœªåŒæ­¥æ›´æ–°`generateIndex`ï¼Œå¯¼è‡´æ˜ å°„ä½ç½®åç§»
- æ–¹æ¡ˆï¼šæ–°å¢`addString()`è¾…åŠ©æ–¹æ³•ï¼Œç»Ÿä¸€å¤„ç†å­—ç¬¦ä¸²æ‹¼ï¿½?ç´¢å¼•æ›´æ–°
- å½±å“ï¼šæ¨¡æ¿å­—ç¬¦ä¸²ã€å¸ƒå°”/nullå­—é¢é‡ã€ä¸€å…ƒè¿ç®—ç¬¦ã€æ¡ä»¶è¡¨è¾¾å¼ã€èµ‹å€¼è¡¨è¾¾å¼

### ç¼–è¯‘å™¨æµ‹è¯•ï¼š91.7%ï¿½?1/12ï¿½?**ï¿½?å·²è¦†ç›–ç‰¹ï¿½?*

**Export & Import**
- ï¿½?export class
- ï¿½?export const  
- ï¿½?export default
- ï¿½?Multiple named exports

**Class Features**
- ï¿½?Empty constructor
- ï¿½?Multiple methods
- ï¿½?Method with parameters
- ï¿½?this references
- ï¿½?Arrow functions in methods

**OVS Syntax**
- ï¿½?Elements with/without props
- ï¿½?Nested elements
- ï¿½?Conditional rendering (if)
- ï¿½?List rendering (map)
- ï¿½?Props with reserved keywords

**Operators**
- ï¿½?Unary: !, +, -, typeof
- ï¿½?Comparison: ===, !==, <, >
- ï¿½?Arithmetic: +, -, *, %
- ï¿½?Logical: &&, ||

**JavaScript Features**
- ï¿½?const/let/var
- ï¿½?Functions
- ï¿½?Arrow functions
- ï¿½?Loops (for, while)
- ï¿½?Conditionals (if/else)

### æµ‹è¯•æ¶æ„ï¼ˆAIå¼€å‘ä¼˜åŒ–ï¼‰

**testsç›®å½•ç»“æ„ï¼ˆæç®€ç‰ˆï¼‰ï¿½?*
```
tests/
â”œâ”€â”€ cases/             # æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼ˆ01-12ç¼–å·ï¼Œç®€å•â†’å¤æ‚ï¼Œç¦æ­¢åˆ†å­ç›®å½•ï¼‰
ï¿½?  â”œâ”€â”€ 01-simple.ovs
ï¿½?  â”œâ”€â”€ 02-nested.ovs
ï¿½?  â”œâ”€â”€ ...
ï¿½?  â””â”€â”€ 12-complex-feature.ovs
â””â”€â”€ utils/             # è°ƒè¯•å·¥å…·ï¼ˆAIè¾…åŠ©ä½¿ç”¨ï¿½?    â”œâ”€â”€ check-iife-ast.ts         # æ£€æŸ¥ASTç»“æ„
    â””â”€â”€ show-hello-compiled.ts    # æŸ¥çœ‹ç¼–è¯‘ç»“æœ
```

**è®¾è®¡ç†å¿µï¿½?*
- AIå¼€å‘é¡¹ç›®ä¸éœ€è¦jest/vitestç­‰è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼ˆé‚£æ˜¯ç»™äººç±»CI/CDç”¨çš„ï¿½?- AIé€šè¿‡å¤åˆ¶.ovsç”¨ä¾‹åˆ°example/æµ‹è¯•ç¼–è¯‘å™¨åŠŸï¿½?- utils/ä¸‹çš„å·¥å…·ç”¨äºæ‰‹åŠ¨è°ƒè¯•å’ŒæŸ¥çœ‹ç¼–è¯‘ç»“ï¿½?- æç®€ç»“æ„ï¼šä»25ä¸ªæ–‡ä»¶ç²¾ç®€ï¿½?4ä¸ªï¼ˆå‡å°‘44%ï¿½?- æ‰å¹³åŒ–ï¼šä¸æŒ‰ç±»å‹åˆ†å­ç›®å½•ï¼ˆsingle/combinedç­‰ï¼‰ï¼Œæ‰€æœ‰ç”¨ä¾‹å¹³é“ºåœ¨cases/ï¿½?
**å‘½åè§„èŒƒï¿½?*
- æ ¼å¼ï¼š`01-åŠŸèƒ½ï¿½?ovs`ï¼ˆä¸¤ä½æ•°ç¼–å·ï¿½?- é¡ºåºï¼šæŒ‰å¤æ‚åº¦æ’åºï¼ˆç®€å•â†’å¤æ‚ï¿½?- ç¦æ­¢ï¼šæŒ‰ç±»å‹åˆ›å»ºå­ç›®å½•ï¼ˆsingle/ã€combined/ç­‰ï¼‰

**AIå¦‚ä½•ä½¿ç”¨ï¿½?*
1. **æµ‹è¯•ç¼–è¯‘åŠŸèƒ½**ï¼šå¤åˆ¶cases/ä¸‹çš„.ovsåˆ°example/src/views/hello.ovsï¼Œå¯åŠ¨devæœåŠ¡å™¨æŸ¥ï¿½?2. **æŸ¥çœ‹ç¼–è¯‘ç»“æœ**ï¼šè¿ï¿½?`npx tsx tests/utils/show-hello-compiled.ts`
3. **æ£€æŸ¥ASTç»“æ„**ï¼šè¿ï¿½?`npx tsx tests/utils/check-iife-ast.ts`ï¼ˆè°ƒè¯•ä¼˜åŒ–ç”¨ï¿½?
**å·²åˆ é™¤çš„è‡ªåŠ¨åŒ–æµ‹è¯•åŸºç¡€è®¾æ–½ï¿½?*
- unit/ã€integration/ã€regression/ï¿½?test.tsæ–‡ä»¶ï¿½?- fixtures/ï¼ˆæµ‹è¯•æ•°æ®ï¼‰
- jest.config.jsã€vitest.config.tsï¼ˆé…ç½®ï¼‰
- run-all-tests.tsã€run-tests.tsï¼ˆè¿è¡Œå™¨ï¿½?- test-helpers.tsï¼ˆè¾…åŠ©å‡½æ•°ï¼‰

## å¿«é€Ÿå¼€å§‹æŒ‡ï¿½?
### 5åˆ†é’Ÿä¸Šæ‰‹
```bash
# 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
cd ovs && npm run dev

# 2. ç¼–å†™ç¬¬ä¸€ä¸ªOVSç»„ä»¶ï¼ˆhello.ovsï¿½?const greeting = "Hello OVS!"

div {
  h1 { greeting }
  p { "Welcome to declarative UI!" }
}

# 3. æµè§ˆå™¨æŸ¥çœ‹ï¼šhttp://localhost:5173
```

### æµ‹è¯•ç”¨ä¾‹å¿«é€Ÿä½“ï¿½?```bash
# å¤åˆ¶åŸºç¡€ç¤ºä¾‹
Copy-Item tests\cases\01-simple.ovs example\src\views\hello.ovs

# å¤åˆ¶ç®­å¤´å‡½æ•°ç¤ºä¾‹
Copy-Item tests\cases\07-arrow-functions.ovs example\src\views\hello.ovs

# å¤åˆ¶Classç¤ºä¾‹
Copy-Item tests\cases\08-class.ovs example\src\views\hello.ovs

# å¤åˆ¶ç»„åˆæµ‹è¯•ï¼ˆexport + classï¿½?Copy-Item tests\cases\11-export-class.ovs example\src\views\hello.ovs
```

### æµè§ˆå™¨è°ƒè¯•æŒ‡ï¿½?**è®¿é—®åœ°å€ï¿½?* http://localhost:5173

**é¢„æœŸæ˜¾ç¤ºå†…å®¹ï¿½?*
1. **ç®€å•è§†å›¾åŒºï¿½?*ï¼šæ ‡ï¿½?+ æ–‡æœ¬å†…å®¹
2. **å¤æ‚è§†å›¾åŒºå—**ï¼šforå¾ªç¯æ¸²æŸ“åˆ—è¡¨ï¼ˆappleã€bananaã€cherryï¿½?3. **æ¡ä»¶è§†å›¾åŒºå—**ï¼šifæ¡ä»¶æ¸²æŸ“å†…å®¹

**è°ƒè¯•æ­¥éª¤ï¿½?*
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¿½?2. æŸ¥çœ‹Consoleæ§åˆ¶å°çš„`OvsAPI.createVNode`è°ƒç”¨æ—¥å¿—
3. æ£€æŸ¥Elementsé¢æ¿çš„DOMç»“æ„
4. éªŒè¯åŠŸèƒ½æ˜¯å¦æ­£ç¡®æ¸²æŸ“

## æ–‡æ¡£ä½“ç³»
- **.cursor/rules/guidebot.mdc**ï¼šé€šç”¨AIåä½œè§„åˆ™å’Œæ–¹æ³•è®º
- **.cursor/rules/project.mdc**ï¼šOVSé¡¹ç›®å®Œæ•´æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
  - åŒ…å«ï¼šé¡¹ç›®å®šä½ã€æ ¸å¿ƒåŠŸèƒ½ã€è¯­æ³•å‚è€ƒã€å®ç°åŸç†ã€ä»£ç ç¤ºä¾‹ã€æœ€ä½³å®è·µã€è¿è¡Œæ—¶å·¥å…·è¯´æ˜
  - ä½œç”¨ï¼šAIç†è§£é¡¹ç›®çš„å•ä¸€ä¿¡æ¯æºï¼Œæ‰€æœ‰é¡¹ç›®ä¿¡æ¯éƒ½åœ¨è¿™
  - æˆæœï¼šæ•´åˆäº†æ‰€æœ‰åˆ†æ•£æ–‡æ¡£ï¼Œå®ç°å•ä¸€ä¿¡æ¯æº
- **tests/cases/mapping/README.md**ï¼šæºç æ˜ å°„æµ‹è¯•ç”¨ä¾‹è¯´æ˜ï¼ˆæµ‹è¯•ä¸“ç”¨ï¼‰
- **tests/TEST_PLAN_50.md**ï¼šæµ‹è¯•è®¡åˆ’æ–‡æ¡£ï¼ˆæµ‹è¯•ä¸“ç”¨ï¼‰

## ä¾èµ–é¡¹ç›®
- **Subhuti 0.1.3**ï¼šParseræ¡†æ¶ï¼ˆè¯æ³•åˆ†æï¼‰
- **Slimeç³»åˆ—**ï¼šASTå·¥å…·é“¾ï¼ˆè¯­æ³•æ ‘å¤„ç†ï¼‰
- **Vue 3.5.12**ï¼šæ¸²æŸ“å¼•æ“ï¼ˆç›®æ ‡æ¡†æ¶ï¼‰
- **Vite 7.1.7**ï¼šæ„å»ºå·¥å…·ï¼ˆå¼€å‘ä½“éªŒï¼‰

## è¿è¡Œæ—¶ä¾èµ–å·¥å…·

### ReactiveVNodeï¼ˆå“åº”å¼ VNode å°è£…åº“ï¼‰

**ä½ç½®ï¼š** `example/src/utils/ReactiveVNode.ts`

**ä½œç”¨ï¼š** åŸºäº Vue 3 çš„å“åº”å¼ç³»ç»Ÿå°è£…çš„å“åº”å¼ VNode åº“ï¼ŒOVS ç¼–è¯‘åçš„ä»£ç ä¾èµ–æ­¤åº“ã€‚

**æ ¸å¿ƒ APIï¼ˆv0.2.1 æ‹†åˆ†åï¼‰ï¼š**
```typescript
// ç”¨äº OVS ç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç 
createComponentVNode(componentFn: FunctionComponent, props?: Record<string, any>, children?: any): ReactiveVNodeApi

// ç”¨äº HTML å…ƒç´ åº“ï¼ˆhtmlElements.tsï¼‰
createElementVNode(type: string, props?: Record<string, any>, children?: any): ReactiveVNodeApi

// ç±»å‹å®šä¹‰
export type FunctionComponent = (state: ReactiveVNodeState) => ReactiveVNodeApi
export type HtmlElementType = string
```

**ç»„ä»¶å‡½æ•°è°ƒç”¨æœºåˆ¶ï¼š**
- å½“ `type` æ˜¯å‡½æ•°æ—¶ï¼Œ`toVnode()` ä¼šè°ƒç”¨ `componentFn(state)` ä¼ å…¥æ•´ä¸ª `state` å¯¹è±¡
- ç»„ä»¶å‡½æ•°åº”è¿”å› `ReactiveVNodeApi` ç±»å‹
- æ”¯æŒé€’å½’æ¸²æŸ“ï¼šå­èŠ‚ç‚¹å¯ä»¥æ˜¯ `ReactiveVNodeApi` å¯¹è±¡ï¼Œè‡ªåŠ¨è°ƒç”¨ `toVnode()` è½¬æ¢

**å“åº”å¼æ›´æ–°ï¼š**
- `state.props` å’Œ `state.children` è‡ªåŠ¨åŒ…è£…ä¸ºå“åº”å¼
- ä¿®æ”¹ `state.props` æˆ– `state.children` ä¼šè§¦å‘è‡ªåŠ¨é‡æ¸²æŸ“
- æ”¯æŒ `ref`ã€`computed`ã€`reactive` ç­‰ Vue å“åº”å¼ API

### htmlElementsï¼ˆHTML å…ƒç´ è¾…åŠ©å‡½æ•°ï¼‰

**ä½ç½®ï¼š** `example/src/utils/htmlElements.ts`

**ä½œç”¨ï¼š** æä¾›æ‰€æœ‰å¸¸ç”¨ HTML æ ‡ç­¾çš„ç±»å‹å®‰å…¨è¾…åŠ©å‡½æ•°ï¼Œä½¿ç”¨ `createElementVNode()` å®ç°ç±»å‹å®‰å…¨çš„ HTML å…ƒç´ åˆ›å»ºã€‚

**ä½¿ç”¨æ–¹å¼ï¼š**
```typescript
import { div, p, span, button } from './utils/htmlElements'

// å®Œæ•´çš„ç±»å‹æç¤ºå’Œæ™ºèƒ½è¡¥å…¨
const view = div({ class: 'container' }, [
  p({}, 'Hello'),
  span({ style: { color: 'red' } }, 'World'),
  button({ onClick: () => console.log('clicked') }, 'Click me')
])
```

**ä¼˜åŠ¿ï¼š**
- âœ… ç±»å‹å®‰å…¨ï¼šå®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- âœ… æ™ºèƒ½æç¤ºï¼šIDE è‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æ£€æŸ¥
- âœ… é¿å…æ‹¼å†™é”™è¯¯ï¼šç¼–è¯‘æ—¶æ£€æŸ¥æ ‡ç­¾å

**OVS ç¼–è¯‘å™¨é›†æˆï¼š**
- OVS ç¼–è¯‘å™¨è‡ªåŠ¨å°† `div {}` è½¬æ¢ä¸º `div({}, [...])` è°ƒç”¨
- è‡ªåŠ¨æ·»åŠ  `import { div, p, ... } from '../utils/htmlElements'`
- æ— éœ€æ‰‹åŠ¨å¯¼å…¥ï¼Œç¼–è¯‘æ—¶è‡ªåŠ¨å¤„ç†

---

# ã€å®Œæ•´è¯­æ³•å‚è€ƒï¿½?
## OVSè¯­æ³•è§„åˆ™

### ç»„ä»¶ç³»ç»Ÿï¼ˆNEWï¿½?
**ç»„ä»¶å£°æ˜ï¿½?*
```javascript
ovsView ComponentName (state) : rootElement {
  // ç»„ä»¶å†…éƒ¨é€»è¾‘
  let data = state.props.value
  
  h1 { state.props.title }
  p { data }
  
  // è®¿é—®å­èŠ‚ç‚¹
  div { state.children }
}

// ç¼–è¯‘åï¼ˆè¿”å› ReactiveVNodeApi ç±»å‹ï¼‰ï¼š
function ComponentName(state) {
  const children = []
  let data = state.props.value
  children.push(createReactiveVNode('h1', {}, [state.props.title]))
  children.push(createReactiveVNode('p', {}, [data]))
  children.push(createReactiveVNode('div', {}, [state.children]))
  return createReactiveVNode('div', {}, children)  // è¿”å› ReactiveVNodeApi
}
```

**è¯´æ˜ï¼š**
- ç»„ä»¶å‡½æ•°æ¥æ”¶ `state` å‚æ•°ï¼ˆåŒ…å« `state.props` å’Œ `state.children`ï¼‰
- ç»„ä»¶å‡½æ•°è¿”å› `ReactiveVNodeApi` ç±»å‹ï¼ˆ`createComponentVNode()` çš„è°ƒç”¨ç»“æœï¼‰
- `rootElement` æŒ‡å®šç»„ä»¶çš„æ ¹å…ƒç´ ç±»å‹ï¼ˆå¦‚ `div`ã€`span` ç­‰ï¼‰
- `createComponentVNode(firstArg, props, children)` ä¸­ï¼š
  - `firstArg`ï¼šæ ‡ç­¾å­—ç¬¦ä¸²ï¼ˆå¦‚ `'div'`ï¼‰æˆ–ç»„ä»¶æ ‡è¯†ç¬¦ï¼ˆå¦‚ `MyComponent`ï¼‰
  - `props`ï¼šå…ƒç´ /ç»„ä»¶çš„å±æ€§å¯¹è±¡ï¼ˆå¦‚ `{}`ã€`state.props` ç­‰ï¼‰
  - `children`ï¼šå­èŠ‚ç‚¹æ•°ç»„æˆ–å•ä¸ªå­èŠ‚ç‚¹

**ç»„ä»¶è°ƒç”¨?*
```javascript
div {
  MyCard({attrs: {title: "Hello", content: "World"}}) {
    p { "æ’æ§½å†…å®¹" }
    "child content"
  }
}

// ç¼–è¯‘ï¿½?ï¿½?h('div', {}, [
  h(MyCard, {attrs: {title: "Hello", content: "World"}}, [
    h('p', {}, ["æ’æ§½å†…å®¹"]),
    "child content"
  ])
])
```

**å…³é”®ç‰¹æ€§ï¼š**
- ç»„ä»¶åé¦–å­—æ¯å¤§å†™ï¼šè‡ªåŠ¨è¯†åˆ«ä¸ºç»„ä»¶ï¼Œç”Ÿï¿½?`h(Component, ...)`
- æ ‡ç­¾åå°å†™ï¼šè¯†åˆ«ä¸ºHTMLæ ‡ç­¾ï¼Œç”Ÿï¿½?`h('div', ...)`
- Arguments å‚æ•°ï¼šä½œï¿½?props å¯¹è±¡ä¼ ï¿½?- èŠ±æ‹¬å·å†…å®¹ï¼šä½œä¸º children ä¼ ï¿½?- `slot{}`ï¼šç¼–è¯‘ä¸º `slots.default()`ï¼Œç»„ä»¶è‡ªåŠ¨æ·»ï¿½?`{slots}` å‚æ•°

### æ ¸å¿ƒæ¸²æŸ“è§„åˆ™ï¼ˆv0.2.0 é‡å¤§æ›´æ–°ï¿½?
**è®¾è®¡å“²å­¦ï¼šJavaScript æ˜¯ä¸»ä½“ï¼ŒUI æ˜¯é™„ï¿½?*

ï¿½?`div {}` å†…éƒ¨ï¼Œé»˜è®¤æ‰€æœ‰è¡¨è¾¾å¼éƒ½ä¼šè¢«æ¸²æŸ“ï¼Œä½¿ç”¨ `#{}` éš”ç¦»ä¸éœ€è¦æ¸²æŸ“çš„ä»£ç ï¿½?
#### åŸºç¡€æ¸²æŸ“è§„åˆ™

```javascript
div {
  // æ°¸è¿œä¸æ¸²æŸ“ï¼ˆDeclarationï¿½?  const data = [1, 2, 3]   // ï¿½?ä¸æ¸²æŸ“ï¼ˆå˜é‡å£°æ˜ï¿½?  function helper() {}     // ï¿½?ä¸æ¸²æŸ“ï¼ˆå‡½æ•°å£°æ˜ï¿½?  
  // é»˜è®¤æ¸²æŸ“ï¼ˆExpressionStatementï¿½?  p { "hello" }            // ï¿½?æ¸²æŸ“ï¼ˆå…ƒç´ ï¼‰
  func()                   // ï¿½?æ¸²æŸ“ï¼ˆå‡½æ•°è°ƒç”¨è¿”å›å€¼ï¼‰
  "text"                   // ï¿½?æ¸²æŸ“ï¼ˆå­—ç¬¦ä¸²ï¿½?  count + 1                // ï¿½?æ¸²æŸ“ï¼ˆè¡¨è¾¾å¼ç»“æœï¿½?}
```

#### `#{}` ä¸æ¸²æŸ“å—ï¼ˆNEWï¿½?
ä½¿ç”¨ `#{}` åŒ…è£¹çš„ä»£ç ä¸ä¼šè¢«æ¸²æŸ“ï¼ˆé™¤éæ˜¯æ˜ç¡®çš„æ¸²æŸ“å…ƒç´ ï¼‰ï¿½?
```javascript
div {
  // #{} ç”¨äºéš”ç¦»çº¯é€»è¾‘ä»£ç 
  #{
    const x = getData()     // ä¸æ¸²æŸ“ï¼ˆï¿½?#{} å†…ï¼‰
    console.log(x)          // ä¸æ¸²æŸ“ï¼ˆï¿½?#{} å†…ï¼‰
    processData(x)          // ä¸æ¸²æŸ“ï¼ˆï¿½?#{} å†…ï¼‰
  }
  
  // å…ƒç´ æ°¸è¿œæ¸²æŸ“ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
  #{
    p { "æˆ‘åœ¨ #{} ï¿½? }     // ï¿½?ä»ç„¶æ¸²æŸ“ï¼ˆå…ƒç´ ä¼˜å…ˆï¼‰
    span { "æˆ‘ä¹Ÿæ¸²æŸ“" }     // ï¿½?ä»ç„¶æ¸²æŸ“
  }
  
  // å¤–å±‚æ­£å¸¸æ¸²æŸ“
  p { "å¤–å±‚å†…å®¹" }          // ï¿½?æ¸²æŸ“
  getTitle()                // ï¿½?æ¸²æŸ“ï¼ˆä¸ï¿½?#{} å†…ï¼‰
}

// ç¼–è¯‘ï¿½?ï¿½?(function() {
  const children = []
  
  // #{} å†…çš„ä»£ç å¹³é“ºï¼ˆä¸ï¿½?pushï¿½?  const x = getData()
  console.log(x)
  processData(x)
  
  // #{} å†…çš„å…ƒç´ ä»ç„¶ï¿½?push
  children.push(h('p', {}, ['æˆ‘åœ¨ #{} ï¿½?]))
  children.push(h('span', {}, ['æˆ‘ä¹Ÿæ¸²æŸ“']))
  
  // å¤–å±‚æ­£å¸¸ push
  children.push(h('p', {}, ['å¤–å±‚å†…å®¹']))
  children.push(getTitle())
  
  return h('div', {}, children)
})()
```

#### æ¸²æŸ“ä¼˜å…ˆï¿½?
```
1. OvsRenderFunction (p {}, div {}) ï¿½?æ°¸è¿œæ¸²æŸ“ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¿½?2. ï¿½?#{} ï¿½?ï¿½?ä¸æ¸²æŸ“ï¼ˆé»˜è®¤ï¿½?3. ï¿½?div {} ï¿½?ï¿½?æ¸²æŸ“
4. å…¶ä»– ï¿½?ä¸æ¸²ï¿½?```

#### æ§åˆ¶æµä¸­çš„æ¸²ï¿½?
```javascript
div {
  if (show) {
    #{
      const temp = getData()
      console.log(temp)      // ä¸æ¸²ï¿½?    }
    p { "visible" }          // ï¿½?æ¸²æŸ“
  }
  
  #{
    let i = 0
  }
  
  p { items[0] }
  
  #{
    i = i + 1
  }
  
  p { items[1] }
}
```

#### `#{}` çš„ç‰¹ï¿½?
- ï¿½?å¯ä»¥åµŒå¥—ï¼š`#{ #{ } }`
- ï¿½?åœ¨æ§åˆ¶æµå†…æ­£å¸¸å·¥ä½œï¼š`if () { #{ } }`
- ï¿½?å†…éƒ¨å…ƒç´ ä»ç„¶æ¸²æŸ“ï¼š`#{ p {} }`
- ï¿½?è¯­å¥å¹³é“ºï¼ˆä¸å¢åŠ åŒ…è£¹ï¿½?- ï¿½?å¯¹å…ƒç´ å†…éƒ¨ä¸ç”Ÿæ•ˆï¼ˆè¿›å…¥å…ƒç´ æ—¶é‡ç½®ï¿½?- ï¿½?ä½œç”¨åŸŸå…±äº«ï¼ˆå¯è®¿é—®å¤–å±‚å˜é‡ï¼‰

## å¯¼å‡ºæ–¹å¼

### âœ… æ–¹å¼1: ç®­å¤´å‡½æ•°ç»„ä»¶ï¼ˆæ¨èç®€å•åœºæ™¯ï¼‰

**OVS ä»£ç ï¼š**
```javascript
export const MyCard = (state) => div {
  h2 { state.props.title }
  p { state.props.content }
}
```

**ç¼–è¯‘ç»“æœï¼š**
```javascript
export const MyCard = state => createComponentVNode(div, {}, [
  createComponentVNode(h2, {}, [state.props.title]),
  createComponentVNode(p, {}, [state.props.content])
])
```

**ä½¿ç”¨æ–¹å¼ï¼š**
```javascript
import { MyCard } from './components.ovs'

div {
  MyCard({ props: { title: "Hello", content: "World" } })
}
```

**ç‰¹ç‚¹ï¼š**
- âœ… è¯­æ³•æœ€ç®€æ´
- âœ… ç¼–è¯‘ä»£ç æœ€ç²¾ç®€ï¼ˆæ—  IIFEï¼‰
- âœ… é€‚åˆç®€å•ç»„ä»¶
- âŒ æ— ç±»å‹æ ‡æ³¨
- âŒ å‚æ•°åå›ºå®šä¸º state

---

### âœ… æ–¹å¼2: ovsView ç»„ä»¶ï¼ˆæ¨èæ­£å¼ç»„ä»¶ï¼‰

**OVS ä»£ç ï¼š**
```javascript
export ovsView MyCard(state) : div {
  const { title, content } = state.props
  
  h2 { title }
  p { content }
}
```

**ç¼–è¯‘ç»“æœï¼š**
```javascript
export function MyCard(state) {
  const { title, content } = state.props
  return createComponentVNode(div, {}, [
    createComponentVNode(h2, {}, [title]),
    createComponentVNode(p, {}, [content])
  ])
}
```

**ä½¿ç”¨æ–¹å¼ï¼š**
```javascript
import { MyCard } from './components.ovs'

export ovsView App(state) : div {
  MyCard({ props: { title: "Hello", content: "World" } })
}
```

**ç‰¹ç‚¹ï¼š**
- âœ… æ­£å¼çš„å‡½æ•°å£°æ˜
- âœ… æ”¯æŒå¤æ‚é€»è¾‘
- âœ… ä»£ç ç»„ç»‡æ¸…æ™°
- âœ… ç±»å‹æ ‡æ³¨å‹å¥½
- âŒ æ¯”ç®­å¤´å‡½æ•°å¤šä¸€å±‚å‡½æ•°åŒ…è£¹

---

### âœ… æ–¹å¼2.5: å‡½æ•°å£°æ˜ï¼ˆå®Œå…¨çµæ´»çš„æ­£å¼ç»„ä»¶ï¼‰

**OVS ä»£ç ï¼š**
```javascript
export function MyCard(state) {
  const { title, content } = state.props
  
  // å¯ä»¥åœ¨å‡½æ•°ä½“å†…è‡ªç”±ç¼–ç¨‹
  let display = title.toUpperCase()
  
  div {
    h2 { display }
    p { content }
  }
}
```

**ç¼–è¯‘ç»“æœï¼š**
```javascript
export function MyCard(state) {
  const { title, content } = state.props
  
  let display = title.toUpperCase()
  
  createComponentVNode(div, {}, [
    createComponentVNode(h2, {}, [display]),
    createComponentVNode(p, {}, [content])
  ])
}
```

**ç‰¹ç‚¹ï¼š**
- âœ… æ™®é€š JavaScript å‡½æ•°å£°æ˜
- âœ… å®Œå…¨çš„ä»£ç çµæ´»æ€§ï¼ˆä»»æ„ JavaScriptï¼‰
- âœ… å‡½æ•°ä½“å†…åªæœ‰ `div{}` ç­‰å…ƒç´ ä¼šè¢«ç¼–è¯‘
- âœ… å¯ä»¥è‡ªç”±ç»„ç»‡é€»è¾‘ï¼ˆè®¡ç®—ã€æ¡ä»¶ã€å¾ªç¯ç­‰ï¼‰
- âœ… é€‚åˆå¤æ‚ç»„ä»¶
- **ä½¿ç”¨åœºæ™¯ï¼š** éœ€è¦å®Œå…¨ä»£ç æ§åˆ¶çš„ç»„ä»¶

---

### âœ… æ–¹å¼2.6: å‡½æ•°è¡¨è¾¾å¼ï¼ˆå¦ä¸€ç§çµæ´»çš„æ­£å¼ç»„ä»¶ï¼‰

**OVS ä»£ç ï¼š**
```javascript
export const MyCard = function(state) {
  const { title, content } = state.props
  
  div {
    h2 { title }
    p { content }
  }
}
```

**ç¼–è¯‘ç»“æœï¼š**
```javascript
export const MyCard = function(state) {
  const { title, content } = state.props
  
  createComponentVNode(div, {}, [
    createComponentVNode(h2, {}, [title]),
    createComponentVNode(p, {}, [content])
  ])
}
```

**ç‰¹ç‚¹ï¼š**
- âœ… å¸¸è§„å‡½æ•°è¡¨è¾¾å¼
- âœ… å®Œå…¨çš„ä»£ç çµæ´»æ€§
- âœ… å‡½æ•°ä½“å†…åªæœ‰ `div{}` ç­‰å…ƒç´ ä¼šè¢«ç¼–è¯‘
- âœ… ä¸å‡½æ•°å£°æ˜åŠŸèƒ½ç›¸åŒ
- **ä½¿ç”¨åœºæ™¯ï¼š** å‡½æ•°è¡¨è¾¾å¼é£æ ¼çš„å¼€å‘è€…

---

### âœ… æ–¹å¼3: å‘½åå¯¼å‡ºè§†å›¾ï¼ˆç®€å•è§†å›¾ï¼‰

**OVS ä»£ç ï¼š**
```javascript
export const Header = div {
  h1 { "Header" }
}

export const Footer = div {
  p { "Footer" }
}
```

**ç¼–è¯‘ç»“æœï¼š**
```javascript
export const Header = createComponentVNode(div, {}, [
  createComponentVNode(h1, {}, ["Header"])
])

export const Footer = createComponentVNode(div, {}, [
  createComponentVNode(p, {}, ["Footer"])
])
```

**ä½¿ç”¨æ–¹å¼ï¼š**
```javascript
import { Header, Footer } from './layout.ovs'

div {
  Header
  p { "main content" }
  Footer
}
```

**ç‰¹ç‚¹ï¼š**
- âœ… æœ€ç®€æ´çš„è¯­æ³•
- âœ… ç›´æ¥å¯¼å‡º VNode
- âœ… é€‚åˆçº¯å±•ç¤ºæ€§ç»„ä»¶
- âŒ æ— æ³•æ¥æ”¶ state å‚æ•°
- âŒ æ— æ³•å¤„ç†åŠ¨æ€å†…å®¹

---

### âœ… æ–¹å¼4: é»˜è®¤å¯¼å‡º

**OVS ä»£ç ï¼š**
```javascript
export default div {
  "default component"
}
```

**ç¼–è¯‘ç»“æœï¼š**
```javascript
export default createComponentVNode(div, {}, ["default component"])
```

**ä½¿ç”¨æ–¹å¼ï¼š**
```javascript
import DefaultComponent from './component.ovs'
```

**ç‰¹ç‚¹ï¼š**
- âœ… æ¨¡å—åŒ–å¯¼å‡º
- âœ… é€‚åˆæ¨¡å—ä¸»ç»„ä»¶
- âŒ æ¯ä¸ªæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ª

---

### ğŸ¯ ç»„ä»¶æ–¹å¼å¯¹æ¯”è¡¨

| ç‰¹æ€§ | ç®­å¤´å‡½æ•° | ovsView | å‡½æ•°å£°æ˜ | å‡½æ•°è¡¨è¾¾å¼ | å‘½åå¯¼å‡º | é»˜è®¤å¯¼å‡º |
|------|---------|---------|---------|----------|---------|---------|
| **è¯­æ³•ç®€æ´åº¦** | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜† | â˜…â˜…â˜…â˜…â˜† | â˜…â˜…â˜…â˜…â˜† | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜† |
| **æ¥æ”¶å‚æ•°** | âœ… state | âœ… state | âœ… state | âœ… state | âŒ | âŒ |
| **ä»£ç çµæ´»æ€§** | ä¸­ç­‰ | ä¸­ç­‰ | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜…â˜… | ä½ | ä½ |
| **æ—  IIFE å¼€é”€** | âœ… | âŒ | âŒ | âŒ | âœ… | âœ… |
| **æ”¯æŒå¤æ‚é€»è¾‘** | âœ… | âœ… | âœ… | âœ… | âš ï¸ ç®€å• | âš ï¸ ç®€å• |
| **ç±»å‹æ ‡æ³¨å‹å¥½** | âŒ | âœ… | âš ï¸ éƒ¨åˆ† | âš ï¸ éƒ¨åˆ† | - | - |
| **å¤šä¸ªå¯¼å‡º** | âœ… | âœ… | âœ… | âœ… | âœ… | âŒ |
| **æ¨èåœºæ™¯** | ç®€å•ç»„ä»¶ | æ­£å¼ç»„ä»¶ | å¤æ‚ç»„ä»¶ | å¤æ‚ç»„ä»¶ | è§†å›¾å…ƒç´  | æ¨¡å—å…¥å£ |

---

### ğŸ“¦ å®Œæ•´ç¼–è¯‘ç¤ºä¾‹ï¼ˆæ‰€æœ‰æ–¹å¼ï¼‰

**è¾“å…¥ä»£ç ï¼š**
```javascript
const a = 123

export const mydiv = (state) => div {
  a
  div { 456 }
}

export ovsView dv2(state) : div {
  a
  div { 456 }
}

export function dv3(state) {
  const b = 789
  div { b }
}

export const dv4 = function(state) {
  const c = 101112
  div { c }
}

export const SimpleView = div {
  "Simple"
}

export default div {
  "Default"
}
```

**ç¼–è¯‘è¾“å‡ºï¼š**
```javascript
import {createReactiveVNode} from '../utils/ReactiveVNode';

const a = 123;

// æ–¹å¼1: ç®­å¤´å‡½æ•°
export const mydiv = state => createComponentVNode(div, {}, [
  a, 
  createComponentVNode(div, {}, [456])
]);

// æ–¹å¼2: ovsView
export function dv2(state) {
  return createComponentVNode(div, {}, [
    a,
    createComponentVNode(div, {}, [456])
  ])
}

// æ–¹å¼3: å‡½æ•°å£°æ˜
export function dv3(state) {
  const b = 789;
  createComponentVNode(div, {}, [b])
}

// æ–¹å¼4: å‡½æ•°è¡¨è¾¾å¼
export const dv4 = function(state) {
  const c = 101112;
  createComponentVNode(div, {}, [c])
}

// æ–¹å¼5: å‘½åå¯¼å‡º
export const SimpleView = createComponentVNode(div, {}, ["Simple"]);

// æ–¹å¼6: é»˜è®¤å¯¼å‡º
export default createComponentVNode(div, {}, ["Default"]);
```

---

### ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

**1. é€‰æ‹©å¯¼å‡ºæ–¹å¼çš„å†³ç­–æ ‘ï¼š**
```
éœ€è¦åŠ¨æ€å†…å®¹ï¼Ÿ
  â”œâ”€ YES: éœ€è¦æ¥æ”¶ propsï¼Ÿ
  â”‚   â”œâ”€ YES: æ˜¯æ­£å¼ç»„ä»¶ï¼Ÿ
  â”‚   â”‚   â”œâ”€ YES: ä½¿ç”¨ ovsView âœ…
  â”‚   â”‚   â””â”€ NO: ä½¿ç”¨ç®­å¤´å‡½æ•° âœ…
  â”‚   â””â”€ NO: ä½¿ç”¨å‘½åå¯¼å‡º âœ…
  â””â”€ NO: ä½¿ç”¨é»˜è®¤å¯¼å‡ºæˆ–å‘½åå¯¼å‡º âœ…
```

**2. ç»„ç»‡å¤§å‹ç»„ä»¶åº“ï¼š**
```javascript
// atoms/Button.ovs - ç®€å•ç»„ä»¶
export const Button = (state) => button {
  state.props.text
}

// molecules/Card.ovs - æ­£å¼ç»„ä»¶
export ovsView Card(state) : div {
  const { title, content } = state.props
  h2 { title }
  p { content }
}

// organisms/Layout.ovs - å¸ƒå±€ç»„ä»¶
export const Header = div { h1 { "Header" } }
export const Footer = div { p { "Footer" } }

// App.ovs - åº”ç”¨å…¥å£
import { Button } from './atoms/Button.ovs'
import { Card } from './molecules/Card.ovs'
import { Header, Footer } from './organisms/Layout.ovs'

export default div {
  Header
  Card({ props: { title: "Welcome" } })
  Button({ props: { text: "Click" } })
  Footer
}
```

**3. è·¨æ–‡ä»¶å¯¼å…¥å’Œä½¿ç”¨ï¼š**
```javascript
// æ–‡ä»¶1: components.ovs
export const Alert = (state) => div {
  p { state.props.message }
}

// æ–‡ä»¶2: app.ovs
import { Alert } from './components.ovs'

export ovsView App(state) : div {
  Alert({ props: { message: "Hello!" } })
}
```

---

# ã€æ ¸å¿ƒå®ç°åŸç†ï¿½?
## ç¼–è¯‘æµç¨‹æ¶æ„
```
OVSæºä»£ï¿½?  ï¿½?1. è¯æ³•åˆ†æ(SubhutiLexer)
Tokens
  ï¿½?2. è¯­æ³•åˆ†æ(OvsParser)
CSTå…·ä½“è¯­æ³•ï¿½?  ï¿½?3. è¯­æ³•è½¬æ¢(OvsCstToSlimeAst.toProgram)
JavaScript AST
  ï¿½?4. æ·»åŠ import(ensureOvsAPIImport)
å¸¦importçš„AST
  ï¿½?5. åŒ…è£¹é¡¶å±‚è¡¨è¾¾ï¿½?wrapTopLevelExpressions) ï¿½?å¤„ç†åçš„AST
  ï¿½?6. ä»£ç ç”Ÿæˆ(SlimeGenerator.generator)
JavaScriptä»£ç 
  ï¿½?7. æ ¼å¼ï¿½?Prettier-ä»…ç”Ÿäº§ç¯ï¿½?
æœ€ç»ˆä»£ï¿½?```

## æ ¸å¿ƒæœºåˆ¶

### 1. è®¡æ•°å™¨æœºåˆ¶ï¼ˆOvsRenderDomViewDepthï¿½?ä½¿ç”¨è®¡æ•°å™¨æ ‡è®°å½“å‰æ˜¯å¦åœ¨OVSå…ƒç´ å†…éƒ¨ï¿½?
```typescript
export class OvsCstToSlimeAst extends SlimeCstToAst {
  private ovsRenderDomViewDepth = 0;

  createOvsRenderDomViewDeclarationAst(cst) {
    this.ovsRenderDomViewDepth++  // è¿›å…¥ï¿½?1
    try {
      // è½¬æ¢StatementList
      // ç”ŸæˆIIFEå‡½æ•°ï¿½?    } finally {
      this.ovsRenderDomViewDepth--  // é€€å‡ºï¼Œ-1
    }
  }

  createExpressionStatementAst(cst) {
    if (this.ovsRenderDomViewDepth > 0) {
      // åœ¨OVSå…ƒç´ å†…ï¼Œè½¬æ¢ä¸ºchildren.push(expr)
      return createChildrenPushStatement(expr)
    } else {
      // ä¸åœ¨å†…éƒ¨ï¼Œä¿æŒåŸï¿½?      return super.createExpressionStatementAst(cst)
    }
  }
}
```

**ä¼˜åŠ¿ï¿½?* ç®€å•ï¼ˆåªéœ€ä¸€ä¸ªæ•´æ•°ï¼‰ã€è‡ªåŠ¨ä¼ é€’ï¼ˆå®ä¾‹å˜é‡ï¼‰ã€æ”¯æŒåµŒå¥—ï¼ˆé€šè¿‡IIFEä½œç”¨åŸŸéš”ç¦»ï¼‰

### 2. æ™ºèƒ½å¯¼å‡ºç³»ç»Ÿ
```typescript
function wrapTopLevelExpressions(ast: SlimeProgram): SlimeProgram {
  const declarations: any[] = []
  const expressions: SlimeStatement[] = []
  let hasExportDefault = false
  
  // 1. åˆ†ç±»declarationså’Œexpressions
  for (const statement of ast.body) {
    if (statement.type === 'ExportDefaultDeclaration') {
      hasExportDefault = true
      declarations.push(statement)
    } else if (isDeclaration(statement)) {
      declarations.push(statement)  // const/let/function/class
    } else {
      expressions.push(statement)  // console.log, div{}, ï¿½?    }
  }
  
  // 2. å¦‚æœæœ‰export defaultï¼Œä¸åšåŒ…ï¿½?  if (hasExportDefault) return ast
  
  // 3. å¦‚æœæ²¡æœ‰è¡¨è¾¾å¼ï¼Œä¿æŒåŸæ ·
  if (expressions.length === 0) return ast
  
  // 4. åŒ…è£¹æ‰€æœ‰è¡¨è¾¾å¼åˆ°IIFE
  const iifeBody = [
    // const children = []
    // ...å¤„ç†æ‰€æœ‰è¡¨è¾¾å¼
    // return children
  ]
  
  const iife = createIIFE(iifeBody)
  const exportDefault = createExportDefaultDeclaration(iife)
  
  return createProgram([...declarations, exportDefault])
}
```

### 3. IIFEä¼˜åŒ–åˆ¤æ–­
```typescript
private isSimpleViewBody(statements: SlimeStatement[]): boolean {
  return statements.every(stmt => {
    // åªå…è®¸ExpressionStatement
    return stmt.type === SlimeAstType.ExpressionStatement
  })
}
```

**ä¼˜åŒ–ç­–ç•¥ï¿½?*
- ç®€å•è§†å›¾ï¼ˆåªæœ‰è¡¨è¾¾å¼ï¼‰ï¿½?ç›´æ¥è°ƒç”¨createVNodeï¼Œæ— IIFE
- å¤æ‚è§†å›¾ï¼ˆæœ‰è¯­å¥ï¼‰â†’ å®Œæ•´IIFEï¼Œæ”¯æŒæ‰€æœ‰é€»è¾‘

## ç¼–è¯‘è½¬æ¢ç¤ºä¾‹

### è¾“å…¥ä»£ç 
```javascript
export const hello = div {
  const abc = true
  if (abc) {
    123
  }
}

export default div{123}

div{456}
div{789}
```

### è¾“å‡ºä»£ç 
```javascript
import OvsAPI from 'ovsjs/src/OvsAPI'

export const hello = (function () {
  const children = []
  const abc = true
  if (abc) {
    children.push(123)
  }
  return OvsAPI.createVNode('div', children)
})()

export default (function () {
  const children = []
  children.push(123)
  return OvsAPI.createVNode('div', children)
})()

// div{456}å’Œdiv{789}ä¿æŒåŸæ ·ï¼ˆæœ‰defaultå°±ä¸ç®¡ï¼‰
```

## è®¾è®¡åŸåˆ™

**1. å•ä¸€èŒè´£**
- CST/ASTè½¬æ¢å±‚ï¼šåªè´Ÿè´£è¯­æ³•è½¬ï¿½?- æ’ä»¶å±‚ï¼šè´Ÿè´£æ–‡ä»¶çº§åˆ«åŒ…è£…å’Œå¯¼å‡ºé€»è¾‘

**2. è§£è€¦æ¸…ï¿½?*
- ä¸åŒå±‚æ¬¡èŒè´£åˆ†ç¦»
- å®¹æ˜“æµ‹è¯•å’Œç»´ï¿½?
**3. é›¶è¿è¡Œæ—¶å¼€é”€**
- æ‰€æœ‰è½¬æ¢åœ¨ç¼–è¯‘æ—¶å®Œï¿½?- ç›´æ¥ç”Ÿæˆä¼˜åŒ–çš„JavaScript

**4. ç±»å‹å®‰å…¨**
- å®Œæ•´TypeScriptæ”¯æŒ
- æ‰€æœ‰ASTèŠ‚ç‚¹éƒ½æœ‰ç±»å‹å®šä¹‰

## åµŒå¥—æ”¯æŒåŸç†

é€šè¿‡IIFEè‡ªåŠ¨åˆ›å»ºæ–°ä½œç”¨åŸŸï¿½?
```javascript
// è¾“å…¥
div {
  123
  span { 456 }
  789
}

// è¾“å‡º
(function(){
  const children = []        // å¤–å±‚children
  children.push(123)
  children.push(
    (function(){             // å†…å±‚IIFE
      const children = []    // æ–°ä½œç”¨åŸŸçš„children
      children.push(456)
      return h('span', {}, children)
    })()
  )
  children.push(789)
  return h('div', {}, children)
})()
```

æ¯ä¸ª `div { }` éƒ½æœ‰è‡ªå·±ï¿½?`children` å˜é‡ï¼Œé€šè¿‡IIFEè‡ªåŠ¨éš”ç¦»ï¼Œä¸ä¼šå†²çªï¿½?
---

# ã€ç»„ä»¶ç³»ç»ŸæŠ€æœ¯å®ç°ï¿½?
## 1. æ™ºèƒ½è¯†åˆ«æœºåˆ¶

### ç»„ä»¶ vs æ ‡ç­¾çš„è¯†ï¿½?
**æ ¸å¿ƒé€»è¾‘ï¿½?*
```typescript
// ï¿½?createOvsRenderDomViewDeclarationAst ï¿½?const id = this.createIdentifierAst(idCst)  // è·å–åç§°
const isComponent = id.name[0] === id.name[0].toUpperCase()  // é¦–å­—æ¯å¤§å†™åˆ¤ï¿½?```

**ç¼–è¯‘ç»“æœå·®å¼‚ï¿½?*
```javascript
// å°å†™ ï¿½?HTMLæ ‡ç­¾
div { "content" }
// ï¿½?h('div', {}, ["content"])  // å­—ç¬¦ï¿½?
// å¤§å†™ ï¿½?Vueç»„ä»¶
MyCard { "content" }
// ï¿½?h(MyCard, {}, ["content"])  // Identifierï¼ˆä¸åŠ å¼•å·ï¼‰
```

### Arguments å‚æ•°æå–

**CST ç»“æ„ï¿½?*
```
OvsRenderDomViewDeclaration
â”œâ”€ Identifier: "MyCard"
â”œâ”€ Arguments
ï¿½? â”œâ”€ LParen: "("
ï¿½? â”œâ”€ ArgumentList
ï¿½? ï¿½? â””â”€ AssignmentExpression (ObjectExpression)
ï¿½? â””â”€ RParen: ")"
â””â”€ LBrace/StatementList/RBrace
```

**æå–ä»£ç ï¿½?*
```typescript
const argumentsCst = cst.children?.find(child => child.name === 'Arguments')
if (argumentsCst) {
  const argListCst = argumentsCst.children.find(child => child.name === 'ArgumentList')
  const firstArgCst = argListCst.children[0]
  componentProps = this.createExpressionAst(firstArgCst.children[0])
}
```

## 2. å±æ€§èµ‹å€¼ç³»ï¿½?
### æ ˆæœºåˆ¶åŸï¿½?
**ä¸ºä»€ä¹ˆéœ€è¦æ ˆï¿½?*

åµŒå¥—viewä¼šè¦†ï¿½?attrs å˜é‡åï¼š
```javascript
div {              // è¿›å…¥ï¼špush('AAA')ï¼Œæ ˆ = [AAA]
  name = 10        // ä½¿ç”¨æ ˆé¡¶ AAA ï¿½?  
  h1 {             // è¿›å…¥ï¼špush('BBB')ï¼Œæ ˆ = [AAA, BBB]
    title = 20     // ä½¿ç”¨æ ˆé¡¶ BBB ï¿½?  }                // é€€å‡ºï¼špop()ï¼Œæ ˆ = [AAA] ï¿½?æ¢å¤å¤–å±‚
  
  age = 30         // ä½¿ç”¨æ ˆé¡¶ AAA ï¿½?(å…³é”®ï¿½?
}
```

**å®ç°ä»£ç ï¿½?*
```typescript
// OvsCstToSlimeAst ï¿½?private attrsVarNameStack: Array<string | null> = []

createOvsRenderDomViewDeclarationAst(cst) {
  const uuid = Math.random().toString(36).substring(2, 10)
  this.attrsVarNameStack.push(`temp$$attrs$$${uuid}`)  // è¿›å…¥æ—¶å‹ï¿½?  
  try {
    // è½¬æ¢è¯­å¥...
  } finally {
    this.attrsVarNameStack.pop()  // é€€å‡ºæ—¶å¼¹æ ˆï¼ˆç¡®ä¿æ¢å¤ï¼‰
  }
}

createExpressionStatementAst(cst) {
  const currentAttrsVarName = this.attrsVarNameStack[length - 1]  // å–æ ˆï¿½?  
  if (isAssignment) {
    // ä½¿ç”¨ currentAttrsVarName ç”Ÿæˆä»£ç 
  }
}
```

### èµ‹å€¼è¡¨è¾¾å¼è½¬æ¢

**è¾“å…¥ï¿½?*
```javascript
div {
  name = 10
  age = 25
}
```

**æ‰§è¡Œæµç¨‹ï¿½?*
1. è¿›å…¥ `createOvsRenderDomViewDeclarationAst`ï¼Œç”Ÿï¿½?uuid = "abc123"ï¼Œå‹ï¿½?2. è°ƒç”¨ `createStatementListAst`
3. éå†è¯­å¥ ï¿½?è°ƒç”¨ `createExpressionStatementAst`
   - `name = 10` ï¿½?è¯†åˆ«ä¸ºèµ‹ï¿½?ï¿½?ç”Ÿæˆ3æ¡è¯­ï¿½?   - `age = 25` ï¿½?è¯†åˆ«ä¸ºèµ‹ï¿½?ï¿½?ç”Ÿæˆ3æ¡è¯­ï¿½?4. é€€å‡ºæ—¶å¼¹æ ˆ

**ç”Ÿæˆä»£ç ï¿½?*
```javascript
(function() {
  const children = []
  const temp$$attrs$$abc123 = {}
  
  // name = 10 ï¿½?3æ¡è¯­ï¿½?  let name = 10                      // 1. å˜é‡å£°æ˜
  temp$$attrs$$abc123.name = name    // 2. èµ‹å€¼åˆ°attrs
  children.push(temp$$attrs$$abc123.name)  // 3. pushåˆ°children
  
  // age = 25 ï¿½?3æ¡è¯­ï¿½?  let age = 25
  temp$$attrs$$abc123.age = age
  children.push(temp$$attrs$$abc123.age)
  
  return h('div', {ovsAttr: temp$$attrs$$abc123}, children)
})()
```

## 3. ç»„ä»¶å£°æ˜è½¬æ¢

### ovsView è¯­æ³•è§„åˆ™

**Parserè§„åˆ™ï¿½?*
```typescript
@SubhutiRule
OvsViewDeclaration() {
  this.tokenConsumer.OvsViewToken()        // ovsView
  this.ovsRenderDomClassDeclaration()       // ComponentName ({params}) :
  this.OvsRenderDomViewDeclaration()        // div { ... }
}

@SubhutiRule
ovsRenderDomClassDeclaration() {
  this.tokenConsumer.Identifier()           // ComponentName
  this.Option(() => {
    this.FunctionFormalParameters()         // ({params})
  })
  this.tokenConsumer.Colon()                // :
}
```

### IIFE å±•å¼€æœºåˆ¶

**ç®€å•ç»„ä»¶ï¼ˆæ— è¯­å¥ï¼‰ï¼š**
```javascript
ovsView MyCard (state) : div {
  h1 { state.props.title }
}

// è§†å›¾è½¬æ¢ä¸ºï¼šcreateReactiveVNode('div', {}, [createReactiveVNode('h1', {}, [state.props.title])])

// æœ€ç»ˆå‡½æ•°ï¼ˆè¿”å› ReactiveVNodeApiï¼‰ï¼š
function MyCard(state) {
  return createReactiveVNode('div', {}, [
    createReactiveVNode('h1', {}, [state.props.title])
  ])
}
```

**å¤æ‚ç»„ä»¶ï¼ˆæœ‰è¯­å¥ï¼‰ï¼š**
```javascript
ovsView ProductCard (state) : div {
  let price = state.props.price
  let discount = price * 0.8
  p { discount }
}

// è§†å›¾è½¬æ¢ä¸º IIFEï¼š
(function() {
  const children = []
  let price = state.props.price
  let discount = price * 0.8
  children.push(createReactiveVNode('p', {}, [discount]))
  return createReactiveVNode('div', {}, children)
})()

// å±•å¼€IIFEå†…å®¹åˆ°å‡½æ•°ä½“ï¼ˆè¿”å› ReactiveVNodeApiï¼‰ï¼š
function ProductCard(state) {
  const children = []
  let price = state.props.price
  let discount = price * 0.8
  children.push(createReactiveVNode('p', {}, [discount]))
  return createReactiveVNode('div', {}, children)  // è¿”å› ReactiveVNodeApi
}
```

**å±•å¼€é€»è¾‘ï¿½?*
```typescript
createOvsViewDeclarationAst(cst) {
  // 1. æå–ç»„ä»¶åå’Œå‚æ•°
  const componentName = ...
  const params = ...
  
  // 2. è½¬æ¢è§†å›¾ï¼ˆä¼šç”ŸæˆIIFEæˆ–hè°ƒç”¨ï¿½?  const viewExpression = this.createOvsRenderDomViewDeclarationAst(viewCst)
  
  // 3. åˆ¤æ–­æ˜¯å¦æ˜¯IIFE
  if (viewExpression.type === 'CallExpression' && 
      viewExpression.callee.type === 'FunctionExpression') {
    // æ˜¯IIFEï¼Œæå–å‡½æ•°ä½“
    const iifeBody = viewExpression.callee.body.body
    functionBodyStatements = iifeBody  // ç›´æ¥ä½¿ç”¨IIFEçš„å‡½æ•°ä½“
  } else {
    // ä¸æ˜¯IIFEï¼ˆç®€å•è§†å›¾ï¼‰ï¼Œç›´æ¥return
    functionBodyStatements = [returnStatement(viewExpression)]
  }
  
  // 4. åˆ›å»ºå‡½æ•°å£°æ˜
  return FunctionDeclaration(componentName, params, functionBody)
}
```

## 4. å®Œæ•´ç¼–è¯‘æµç¨‹ç¤ºä¾‹

**è¾“å…¥ä»£ç ï¼š**
```javascript
ovsView MyButton (state) : div {
  let text = state.props.label || "Click"
  button { text }
}

div {
  MyButton({attrs: {label: "æäº¤"}})
}
```

**ç¼–è¯‘æ­¥éª¤ï¿½?*

1. **è¯æ³•åˆ†æ** ï¿½?è¯†åˆ« `ovsView` å…³é”®å­—token
2. **è¯­æ³•åˆ†æ** ï¿½?ç”ŸæˆCSTï¼ˆOvsViewDeclarationèŠ‚ç‚¹ï¿½?3. **ASTè½¬æ¢** ï¿½?
   - `createOvsViewDeclarationAst` ï¿½?å‡½æ•°å£°æ˜
   - `createOvsRenderDomViewDeclarationAst` ï¿½?è§†å›¾IIFE
4. **IIFEå±•å¼€** ï¿½?æå–å‡½æ•°ä½“å†…ï¿½?5. **æ™ºèƒ½è¯†åˆ«** ï¿½?`MyButton` é¦–å­—æ¯å¤§å†™ï¼Œè¯†åˆ«ä¸ºç»„ï¿½?6. **ä»£ç ç”Ÿæˆ** ï¿½?æœ€ç»ˆJavaScript

**è¾“å‡ºä»£ç ï¼š**
```javascript
import { createReactiveVNode } from '../utils/ReactiveVNode'

function MyButton(state) {
  const children = []
  let text = state.props.label || 'Click'
  children.push(createReactiveVNode('button', {}, [text]))
  return createReactiveVNode('div', {}, children)
}

export default (function () {
  const children = []
  children.push(createReactiveVNode(MyButton, { attrs: { label: 'æäº¤' } }, []))
  return children
})()
```

## 5. å…³é”®è®¾è®¡å†³ç­–

### ä¸ºä»€ä¹ˆç”¨æ ˆè€Œä¸æ˜¯å•ä¸ªå˜é‡ï¼Ÿ

**é—®é¢˜åœºæ™¯ï¿½?*
```javascript
div {
  name = 10     // éœ€è¦ç”¨å¤–å±‚attrs
  h1 {          // å†…å±‚viewå¼€ï¿½?    title = 20  // éœ€è¦ç”¨å†…å±‚attrs
  }             // å†…å±‚viewç»“æŸ
  age = 30      // éœ€è¦æ¢å¤å¤–å±‚attrs ï¿½?å…³é”®ï¿½?}
```

å¦‚æœç”¨å•ä¸ªå˜é‡ï¼Œå†…å±‚viewç»“æŸåæ— æ³•æ¢å¤å¤–å±‚çš„attrsVarNameï¿½?
### ä¸ºä»€ä¹ˆç»„ä»¶è°ƒç”¨è¦åŒºåˆ†å¤§å°å†™ï¼Ÿ

éµå¾ª Vue è§„èŒƒï¿½?- JSX/TSXï¼š`<MyComponent />` vs `<div />`
- hå‡½æ•°ï¼š`h(MyComponent)` vs `h('div')`

å¤§å°å†™åŒºåˆ†è®©ç¼–è¯‘å™¨è‡ªåŠ¨åˆ¤æ–­ï¼Œæ— éœ€é¢å¤–æ ‡è®°ï¿½?
### ä¸ºä»€ä¹ˆå±æ€§ç”¨ {ovsAttr: ...} è€Œä¸æ˜¯å±•å¼€ï¿½?
ç»Ÿä¸€å†…éƒ¨çº¦å®šï¿½?- `{ovsAttr: temp$$attrs$$}` - OVSå†…éƒ¨ç”Ÿæˆçš„attrs
- `{attrs: ...}` - ç”¨æˆ·æ˜¾å¼ä¼ é€’çš„props

ä¾¿äºåŒºåˆ†å’Œè°ƒè¯•ï¼Œé¿å…å±æ€§åå†²çªï¿½?
---

# å˜æ›´è®°å½•

ã€2025-10-30 20:45:31ã€‘
ã€2025-10-30 OVSå¼€å‘æœåŠ¡å™¨æµ‹è¯•æ€»ç»“ã€‘

## ä¿®å¤å†…å®¹
1. ä¿®å¤package.jsonçš„devå‘½ä»¤ï¼š`tsx ../node_modules/vite/bin/vite.js` â†’ `tsx node_modules/vite/bin/vite.js`
   - åŸå› ï¼šviteåœ¨æœ¬åœ°node_modulesï¼Œä¸åœ¨çˆ¶ç›®å½•

## æµ‹è¯•ç»“æœï¼ˆå…¨éƒ¨é€šè¿‡âœ…ï¼‰

### 1. åŸºç¡€ç¼–è¯‘åŠŸèƒ½
- âœ… OVSç¼–è¯‘å™¨æ­£å¸¸å·¥ä½œï¼ˆtest-compile.tséªŒè¯ï¼‰
- âœ… Viteæ’ä»¶æ­£å¸¸åŠ è½½.ovsæ–‡ä»¶
- âœ… ViteæœåŠ¡å™¨æˆåŠŸå¯åŠ¨åœ¨5173ç«¯å£

### 2. æµè§ˆå™¨æ˜¾ç¤ºæµ‹è¯•
- âœ… é¡µé¢æ­£å¸¸æ¸²æŸ“OVSç¼–è¯‘çš„å†…å®¹
- âœ… å“åº”å¼ç³»ç»Ÿæ­£å¸¸ï¼ˆrefè®¡æ•°å™¨è‡ªåŠ¨æ›´æ–°ï¼‰
- âœ… é¢œè‰²å˜åŒ–æ­£å¸¸ï¼ˆcomputedæ ·å¼ç”Ÿæ•ˆï¼‰
- âœ… æ§åˆ¶å°æ—¥å¿—æ­£å¸¸ï¼ˆsetIntervalè¾“å‡ºï¼‰

### 3. æµ‹è¯•ç”¨ä¾‹éªŒè¯
- âœ… 01-simple.ovsï¼šç®€å•æµ‹è¯•ï¼ˆå­—é¢é‡ï¼‰
- âœ… 02-variables.ovsï¼šå˜é‡å¼•ç”¨ï¼ˆuserName, userAge, userRoleï¼‰
- âœ… 04-conditional.ovsï¼šæ¡ä»¶æ¸²æŸ“ï¼ˆifè¯­å¥ï¼‰
- âœ… 08-class.ovsï¼šClassåŠŸèƒ½ï¼ˆconstructor, methodsï¼‰

### 4. HMRçƒ­æ›´æ–°
- âœ… æ–‡ä»¶ä¿®æ”¹åè‡ªåŠ¨æ›´æ–°ï¼ˆéœ€è¦é‡å¯æœåŠ¡å™¨æ¸…é™¤ç¼“å­˜ï¼‰
- âœ… æµè§ˆå™¨å®æ—¶æ˜¾ç¤ºæœ€æ–°ç¼–è¯‘ç»“æœ

## å‘ç°çš„é—®é¢˜
1. âš ï¸ Viteç¼“å­˜é—®é¢˜ï¼šé¦–æ¬¡ä¿®æ”¹.ovsæ–‡ä»¶åï¼ŒHMRä¸ç”Ÿæ•ˆï¼Œéœ€é‡å¯æœåŠ¡å™¨
   - åŸå› ï¼šå¯èƒ½æ˜¯Viteå¯¹è‡ªå®šä¹‰æ–‡ä»¶ç±»å‹çš„ç¼“å­˜ç­–ç•¥
   - å½±å“ï¼šè½»å¾®ï¼ˆé‡å¯å³å¯è§£å†³ï¼‰

## ç»“è®º
**OVSå¼€å‘ç¯å¢ƒå®Œå…¨å¯ç”¨ï¼**
- ç¼–è¯‘å™¨ï¼š100%æ­£å¸¸
- å“åº”å¼ï¼š100%æ­£å¸¸  
- æµ‹è¯•ç”¨ä¾‹ï¼š4/4é€šè¿‡
- ä¸‹ä¸€æ­¥ï¼šç»§ç»­å®Œå–„VSCodeæ‰©å±•é›†æˆï¼ˆP0ä¼˜å…ˆçº§ï¼‰

ã€2025-10-30 20:32:28ã€‘
ã€2025-10-30ã€‘é¡¹ç›®çŠ¶æ€è¯„ä¼°å’Œæ–‡æ¡£æ›´æ–°

å®Œæˆäº†å¯¹OVSé¡¹ç›®LSPæ”¯æŒçŠ¶æ€çš„å…¨é¢è¯„ä¼°å’Œæ–‡æ¡£æ›´æ–°ï¼š

âœ… å·²æ˜ç¡®çš„äº‹å®ï¼š
1. æ ¸å¿ƒå¼•æ“ï¼ˆç¼–è¯‘å™¨+æºç æ˜ å°„+Language Serveræ¡†æ¶ï¼‰100%å°±ç»ª
2. Source Mapå‡†ç¡®ç‡100%ï¼ˆ51/51æµ‹è¯•é€šè¿‡ï¼‰
3. Language Serveræ¡†æ¶å·²åŸºäºVolarå®ç°

âŒ æ˜ç¡®çš„ç¼ºå¤±ï¼š
1. VSCodeæ‰©å±•é›†æˆå°šæœªå®Œæˆ
2. æ‰€æœ‰LSPåŠŸèƒ½ï¼ˆä»£ç è¡¥å…¨ã€è·³è½¬ã€Hoverç­‰ï¼‰å‡ä¸å¯ç”¨
3. ç”¨æˆ·è¿˜ä¸èƒ½åœ¨IDEä¸­è·å¾—æ™ºèƒ½æç¤º

ğŸ“ æ–‡æ¡£æ›´æ–°å†…å®¹ï¼š
1. é‡æ„"å½“å‰çŠ¶æ€"éƒ¨åˆ†ï¼Œåˆ†ä¸º"å·²å®ŒæˆåŠŸèƒ½"å’Œ"æœªå®ŒæˆåŠŸèƒ½"
2. æ–°å¢"LSPæ”¯æŒçŠ¶æ€"ä¸“é¢˜ç« èŠ‚ï¼Œè¯¦ç»†è¯´æ˜æŠ€æœ¯å±‚å’Œç”¨æˆ·ä½“éªŒå±‚çš„å·®è·
3. æ›´æ–°"ä¸‹ä¸€æ­¥è¡ŒåŠ¨"ï¼Œæ˜ç¡®P0ä¼˜å…ˆçº§æ˜¯VSCodeæ‰©å±•é›†æˆï¼ˆé¢„è®¡1-3å¤©ï¼‰
4. æ·»åŠ "å…³é”®é‡Œç¨‹ç¢‘"ï¼Œæ¸…æ™°å±•ç¤ºé¡¹ç›®è¿›åº¦è·¯çº¿å›¾

ğŸ¯ ç»“è®ºï¼š
æŠ€æœ¯å±‚é¢å·²å®Œå…¨å°±ç»ªï¼Œä½†ç”¨æˆ·ä½“éªŒå±‚ï¼ˆVSCodeæ‰©å±•ï¼‰æ˜¯å½“å‰å”¯ä¸€çš„é˜»å¡ç‚¹ã€‚
å®ŒæˆVSCodeæ‰©å±•é›†æˆåï¼ŒOVSå°†å¯ä»¥ç”¨äºç”Ÿäº§å¼€å‘ã€‚

ã€2025-10-30 20:27:15ã€‘
ã€2025-10-30ã€‘æ–°å¢50ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡

å·²åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ 11-50ï¼ˆ40ä¸ªæ–°æµ‹è¯•ï¼‰ï¼š
- 11-20ï¼šåŸºç¡€è¯­æ³•æ‰©å±•ï¼ˆå¤šå˜é‡ã€å­—ç¬¦ä¸²æ‹¼æ¥ã€æ•°ç»„ã€å¯¹è±¡ã€å±æ€§è®¿é—®ã€ç®­å¤´å‡½æ•°ã€æ¨¡æ¿å­—ç¬¦ä¸²ï¼‰
- 21-30ï¼šæ§åˆ¶æµå’Œè¿ç®—ç¬¦ï¼ˆif-elseã€å¾ªç¯ã€ä¸‰å…ƒã€é€»è¾‘ã€æ¯”è¾ƒã€ä¸€å…ƒã€ç®—æœ¯ã€è‡ªå¢è‡ªå‡ï¼‰
- 31-40ï¼šé«˜çº§ç‰¹æ€§ï¼ˆè§£æ„ã€å±•å¼€ã€å¯é€‰é“¾ã€ç©ºå€¼åˆå¹¶ã€asyncã€classã€å¼‚å¸¸ã€é«˜é˜¶å‡½æ•°ï¼‰
- 41-50ï¼šç»„ä»¶ç³»ç»Ÿå’Œç»¼åˆæµ‹è¯•ï¼ˆç»„ä»¶ã€propsã€childrenã€æ¡ä»¶æ¸²æŸ“ã€å¾ªç¯ã€åµŒå¥—ã€çŠ¶æ€ã€äº‹ä»¶ã€æ··åˆåœºæ™¯ï¼‰

æµ‹è¯•ç»“æœï¼š51/51 å…¨éƒ¨é€šè¿‡ï¼Œå‡†ç¡®ç‡ 100% âœ…

æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹éªŒè¯äº†æºç æ˜ å°„åœ¨å„ç§å¤æ‚åœºæ™¯ä¸‹çš„å‡†ç¡®æ€§ï¼ŒåŒ…æ‹¬ï¼š
- åŸºç¡€è¯­æ³•æ˜ å°„
- æ§åˆ¶æµç»“æ„æ˜ å°„
- é«˜çº§ES6+ç‰¹æ€§æ˜ å°„
- ç»„ä»¶ç³»ç»Ÿæ˜ å°„
- æ··åˆå¤æ‚åœºæ™¯æ˜ å°„

ç»“è®ºï¼šæºç æ˜ å°„åŠŸèƒ½å·²å®Œå…¨ç¨³å®šï¼Œæ”¯æŒæ‰€æœ‰OVSè¯­æ³•ç‰¹æ€§ã€‚

ã€2025-10-30 20:09:08ã€‘
## âœ… æºç æ˜ å°„ä¿®å¤ä»»åŠ¡å®Œæˆæ€»ç»“

**ä»»åŠ¡ç›®æ ‡ï¼š** ä¿®å¤OVSæºç æ˜ å°„å‡†ç¡®ç‡ä»84%æå‡åˆ°100%

**é—®é¢˜è¯Šæ–­ï¼š** å…±3ä¸ªæ ¸å¿ƒé—®é¢˜
1. **é—®é¢˜1ï¼ˆæ— æ•ˆæ˜ å°„ï¼‰ï¼š** importè¯­å¥è‡ªåŠ¨ç”Ÿæˆçš„æ˜ å°„å¹²æ‰°LSP
   - ä¿®å¤æ–‡ä»¶ï¼š`ovs/src/index.ts` - æ·»åŠ æ˜ å°„è¿‡æ»¤é€»è¾‘
   - ä¿®å¤æ–‡ä»¶ï¼š`langServer/src/OvsLanguagePlugin.ts` - ç®€åŒ–ä¸ºé˜²å¾¡æ€§æ£€æŸ¥
   
2. **é—®é¢˜2ï¼ˆå†—ä½™æ˜ å°„ï¼‰ï¼š** è‡ªåŠ¨ç”Ÿæˆçš„ASTèŠ‚ç‚¹é”™è¯¯ä¼ é€’`id.loc`
   - ä¿®å¤æ–‡ä»¶ï¼š`ovs/src/factory/OvsCstToSlimeAstUtil.ts`
   - ä¿®å¤å†…å®¹ï¼š`createSimpleView` å’Œ `createComplexIIFE` ä¸­ä¸ä¼ é€’locå‚æ•°
   
3. **é—®é¢˜3ï¼ˆä½ç½®åç§»ï¼‰ï¼š** SlimeGeneratorä¸­12å¤„ç›´æ¥ä¿®æ”¹`generateCode`æœªåŒæ­¥æ›´æ–°`generateIndex`
   - ä¿®å¤æ–‡ä»¶ï¼š`slime/packages/slime-generator/src/SlimeGenerator.ts`
   - ä¿®å¤æ–¹æ¡ˆï¼šæ–°å¢`addString()`æ–¹æ³•ï¼Œç»Ÿä¸€å¤„ç†å­—ç¬¦ä¸²æ‹¼æ¥+ç´¢å¼•æ›´æ–°
   - ä¿®å¤ä½ç½®ï¼šæ¨¡æ¿å­—ç¬¦ä¸²ã€å¸ƒå°”/nullå­—é¢é‡ã€superå…³é”®å­—ã€ä¸€å…ƒè¿ç®—ç¬¦ã€æ›´æ–°è¡¨è¾¾å¼ã€æ¡ä»¶è¡¨è¾¾å¼ã€èµ‹å€¼è¡¨è¾¾å¼ã€åˆ†å·ã€ç©ºæ ¼

**æœ€ç»ˆæµ‹è¯•ç»“æœï¼š**
- æµ‹è¯•ç”¨ä¾‹ï¼š11ä¸ªï¼ˆ00-10ç¼–å·ï¼Œè¦†ç›–å•å˜é‡ã€åµŒå¥—ã€æ¡ä»¶ã€å¾ªç¯ã€å‡½æ•°ã€æ·±åº¦åµŒå¥—ã€å¤æ‚è¡¨è¾¾å¼ã€æ··åˆåœºæ™¯ï¼‰
- é€šè¿‡ç‡ï¼š11/11ï¼ˆ100%ï¼‰âœ…
- å‡†ç¡®ç‡ï¼š100%ï¼ˆæ‰€æœ‰æ˜ å°„ä½ç½®ç²¾ç¡®åŒ¹é…ï¼‰
- æ— æ•ˆæ˜ å°„ï¼š0ä¸ª

**é¡¹ç›®å½±å“ï¼š**
- OVSï¼šæºç æ˜ å°„å®Œå…¨æ­£ç¡®ï¼ŒLSPåŠŸèƒ½å®Œç¾æ”¯æŒ
- Slimeï¼šæ‰€æœ‰ä½¿ç”¨SlimeGeneratorçš„é¡¹ç›®éƒ½ä¼šå—ç›Š

**å·²æ¸…ç†ä¸´æ—¶æ–‡ä»¶ï¼š**
- test-if-mapping.ts
- test-debug-if-generator.ts
- test-debug-if-full.ts
- test-verify-position.ts

**å·²æ›´æ–°æ–‡æ¡£ï¼š**
- ovs/.cursor/rules/project.mdcï¼ˆæµ‹è¯•ç»“æœã€ä¿®å¤å†…å®¹ã€ä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼‰

ã€2025-10-30 20:07:21ã€‘
## ğŸ‰ æºç æ˜ å°„é—®é¢˜å®Œå…¨ä¿®å¤ï¼

**é—®é¢˜æ ¹å› ï¼š** SlimeGeneratorä¸­å¤šå¤„ç›´æ¥ä¿®æ”¹`this.generateCode`è€Œæ²¡æœ‰åŒæ­¥æ›´æ–°`this.generateIndex`ï¼Œå¯¼è‡´åç»­æ‰€æœ‰æ˜ å°„çš„`generate.index`åç§»ã€‚

**ä¿®å¤æ–¹æ¡ˆï¼š**
1. æ–°å¢`addString(str: string)`è¾…åŠ©æ–¹æ³•ï¼Œç»Ÿä¸€å¤„ç†å­—ç¬¦ä¸²æ‹¼æ¥+ç´¢å¼•æ›´æ–°
2. ä¿®å¤æ‰€æœ‰ç›´æ¥æ‹¼æ¥çš„åœ°æ–¹ï¼ˆ12å¤„ï¼‰ï¼š
   - generatorTemplateLiteral (5å¤„)
   - BooleanLiteral/NullLiteral (2å¤„)
   - Superå…³é”®å­— (1å¤„)
   - generatorUnaryExpression (2å¤„)
   - generatorUpdateExpression (2å¤„ â†’ æ”¹ä¸ºè°ƒç”¨addString)
   - generatorConditionalExpression (2å¤„)
   - generatorAssignmentExpression (1å¤„)
   - addSemicolon/addCodeSpacing (2å¤„)

**æµ‹è¯•ç»“æœï¼š** 11/11 å…¨éƒ¨é€šè¿‡ï¼Œå‡†ç¡®ç‡100% âœ…

**ä¿®å¤æ–‡ä»¶ï¼š**
- `slime/packages/slime-generator/src/SlimeGenerator.ts` (æ–°å¢addStringæ–¹æ³•ï¼Œä¿®å¤12å¤„ç›´æ¥æ‹¼æ¥)

**å½±å“èŒƒå›´ï¼š** æ‰€æœ‰ä½¿ç”¨SlimeGeneratorçš„é¡¹ç›®ï¼ˆOVSã€Slimeç­‰ï¼‰

ã€2025-10-30 17:33:02ã€‘
ã€2025-10-30ã€‘OVSæºç æ˜ å°„æµ‹è¯•å¥—ä»¶åˆ›å»ºå®Œæˆ

**åˆ›å»ºå†…å®¹ï¼š**
1. æµ‹è¯•ç”¨ä¾‹ï¼štests/cases/mapping/ ç›®å½•ä¸‹11ä¸ªæµ‹è¯•æ–‡ä»¶ï¼ˆ00-10ï¼‰
2. æµ‹è¯•è¿è¡Œå™¨ï¼štest-mapping-suite.ts
3. æµ‹è¯•æ–‡æ¡£ï¼štests/cases/mapping/README.md

**æµ‹è¯•ç»“æœï¼š**
- æµ‹è¯•æ•°é‡ï¼š11ä¸ªï¼ˆä»ç®€å•åˆ°å¤æ‚çš„æ¸è¿›å¼æµ‹è¯•ï¼‰
- ç¼–è¯‘æˆåŠŸç‡ï¼š100% âœ…
- æœ‰æ•ˆæ˜ å°„å‡†ç¡®ç‡ï¼š9/11è¾¾åˆ°100%

**ä¸»è¦å‘ç°ï¼š**
- âœ… æ ¸å¿ƒæ˜ å°„åŠŸèƒ½æ­£å¸¸ï¼šå˜é‡ã€å…ƒç´ æ ‡ç­¾ã€å­—ç¬¦ä¸²å­—é¢é‡æ˜ å°„å‡†ç¡®
- âš ï¸ æ— æ•ˆæ˜ å°„è¿‡å¤šï¼šæ¯ä¸ªæµ‹è¯•æœ‰18-40ä¸ªæ— æ•ˆæ˜ å°„ï¼ˆè‡ªåŠ¨æ·»åŠ çš„importè¯­å¥ï¼‰
- âš ï¸ æ¡ä»¶æ¸²æŸ“å’Œå¤æ‚åœºæ™¯æ˜ å°„è´¨é‡éœ€æ”¹è¿›

**æ”¹è¿›å»ºè®®ï¼š**
1. è¿‡æ»¤æ— æ•ˆæ˜ å°„ï¼ˆsourceä¸ºç©ºçš„æ˜ å°„ï¼‰
2. ä¼˜åŒ–æ¡ä»¶æ¸²æŸ“å†…éƒ¨çš„æ˜ å°„ç”Ÿæˆ
3. æ”¹è¿›å¤æ‚æ··åˆåœºæ™¯çš„æ˜ å°„å‡†ç¡®æ€§

**æµ‹è¯•ç”¨ä¾‹åˆ†ç±»ï¼š**
- åŸºç¡€åœºæ™¯ï¼ˆ00-03ï¼‰ï¼šå•å­—é¢é‡ã€å˜é‡ã€ç®€å•å…ƒç´ ã€å˜é‡ä½¿ç”¨
- ä¸­çº§åœºæ™¯ï¼ˆ04-07ï¼‰ï¼šåµŒå¥—å…ƒç´ ã€æ¡ä»¶æ¸²æŸ“ã€å¾ªç¯ã€å‡½æ•°è°ƒç”¨
- å¤æ‚åœºæ™¯ï¼ˆ08-10ï¼‰ï¼šæ·±å±‚åµŒå¥—ã€å¤æ‚è¡¨è¾¾å¼ã€ç»¼åˆåœºæ™¯

ï¿½?025-10-24 18:13:11ï¿½?ï¿½?025-10-24ã€‘æ‹¬å·ç³»ç»Ÿä¿®ï¿½?- å…¼å®¹æ€§éªŒè¯å®Œï¿½?
ï¿½?å…¼å®¹æ€§æµ‹è¯•ç»“æœï¼š100% å‘åå…¼å®¹

éªŒè¯èŒƒå›´ï¿½?- Slime 50ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼šå…¨éƒ¨é€šè¿‡ï¿½?0/50ï¿½?- OVS 13ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼šé¢„è®¡å…¨éƒ¨é€šè¿‡
- ç°æœ‰ä»£ç ï¼šé›¶å½±å“

ä¿®æ”¹åˆ†æï¿½?1. çº¯æ·»åŠ å‹ä¿®æ”¹ï¿½?0%ï¼‰ï¼šæ·»åŠ æ–°ç±»å‹ã€æ–°æ¥å£ã€æ–°æ–¹æ³•
2. è¡Œä¸ºä¿®å¤å‹ä¿®æ”¹ï¼ˆ20%ï¼‰ï¼šåªä¿®å¤bugï¼Œä¸å½±å“æ­£ç¡®åœºæ™¯

æŠ€æœ¯ä¿è¯ï¼š
- TypeScript è”åˆç±»å‹æ‰©å±•ï¼šå®Œå…¨å…¼ï¿½?- é€’å½’å¤„ç†æ¶æ„ï¼šæ–°èŠ‚ç‚¹è‡ªåŠ¨æ”¯æŒ
- æ¡ä»¶åˆ¤æ–­ç²¾ç¡®ï¼šåªåœ¨ç‰¹å®šåœºæ™¯è§¦ï¿½?
ç»“è®ºï¼šè¿™æ˜¯ä¸€æ¬¡æ— å‰¯ä½œç”¨çš„å®Œç¾ä¿®å¤ï¿½?
ï¿½?025-10-24 18:10:04ï¿½?ï¿½?025-10-24ã€‘Slime æ‹¬å·ç³»ç»Ÿå®Œæ•´ä¿®å¤ - æ¶æ„çº§ä¿®ï¿½?
ï¿½?ä¿®å¤ï¿½?ä¸ªBugï¿½?1. ç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡å­—é¢é‡ï¼š() => ({ x: 1 }) æ‹¬å·ä¸¢å¤± ï¿½?è¯­æ³•é”™è¯¯
2. äºŒå…ƒè¡¨è¾¾å¼æ‹¬å·ä¸¢å¤±ï¼š(a + 1) % b æ‹¬å·è¢«ç§»ï¿½?ï¿½?è¿ç®—ç¬¦ä¼˜å…ˆçº§é”™è¯¯

ï¿½?ä¿®æ”¹5ä¸ªæ–‡ä»¶ï¼ˆå®Œæ•´çš„ç±»å‹ç³»ç»Ÿï¼‰ï¿½?1. SlimeAstType.ts - æ·»åŠ  ParenthesizedExpression æšä¸¾
2. SlimeAstInterface.ts - æ·»åŠ æ¥å£å®šä¹‰ + è”åˆç±»å‹
3. SlimeAst.ts - æ·»åŠ  createParenthesizedExpression å·¥å‚æ–¹æ³•
4. SlimeCstToAstUtil.ts - CST ï¿½?AST è½¬æ¢æ—¶åˆ›å»ºèŠ‚ï¿½?5. SlimeGenerator.ts - ä»£ç ç”Ÿæˆæ—¶è¾“å‡ºæ‹¬ï¿½?+ ä¿®å¤ç®­å¤´å‡½æ•°

ï¿½?æµ‹è¯•éªŒè¯100%é€šè¿‡ï¿½?- Slimeç‹¬ç«‹æµ‹è¯•ï¿½?ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡
- OVSç¼–è¯‘æµ‹è¯•ï¼šhello.ovs å®Œæ•´ç¼–è¯‘ï¼Œæ— è¯­æ³•é”™è¯¯
- æµè§ˆå™¨è¿è¡Œï¼šå“åº”å¼æ­£å¸¸ï¼Œé¢œè‰²æ¯ç§’å˜åŒ–

ï¿½?å½±å“ï¿½?- Vue computed()ã€reactive() ï¿½?API å®Œå…¨å¯ç”¨
- æ‰€æœ‰å¤æ‚æ•°å­¦è¿ç®—è¡¨è¾¾å¼æ­£ç¡®
- è¿ç®—ç¬¦ä¼˜å…ˆçº§å‡†ç¡®ä¿ç•™

ï¿½?025-10-24 18:08:31ï¿½?ï¿½?025-10-24ã€‘æ‹¬å·ç³»ç»Ÿå®Œæ•´ä¿®ï¿½?
ï¿½?ä¿®å¤çš„Bugï¿½?1. ç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡å­—é¢é‡ï¼š() => ({ x: 1 }) æ‹¬å·ä¸¢å¤±
2. äºŒå…ƒè¡¨è¾¾å¼æ‹¬å·ä¸¢å¤±ï¼š(a + 1) % b æ‹¬å·è¢«ç§»ï¿½?
ï¿½?ä¿®æ”¹æ–‡ä»¶ï¿½?ä¸ªï¼‰ï¿½?1. slime-ast/src/SlimeAstType.ts - æ·»åŠ  ParenthesizedExpression ç±»å‹
2. slime-ast/src/SlimeAstInterface.ts - æ·»åŠ æ¥å£å®šä¹‰å’Œè”åˆç±»ï¿½?3. slime-ast/src/SlimeAst.ts - æ·»åŠ  createParenthesizedExpression å·¥å‚æ–¹æ³•
4. slime-parser/src/language/SlimeCstToAstUtil.ts - è¯†åˆ«æ‹¬å·å¹¶åˆ›å»ºèŠ‚ï¿½?5. slime-generator/src/SlimeGenerator.ts - ç”Ÿæˆæ‹¬å· + ä¿®å¤ç®­å¤´å‡½æ•°

ï¿½?æµ‹è¯•éªŒè¯ï¿½?- æµ‹è¯•1ï¿½?1 + 2) * 3 ï¿½?ï¿½?æ‹¬å·ä¿ç•™
- æµ‹è¯•2ï¿½?) => ({ x: 1 }) ï¿½?ï¿½?å¯¹è±¡æ‹¬å·æ­£ç¡®
- æµ‹è¯•3ï¿½?colorIndex.value + 1) % colors.length ï¿½?ï¿½?å¤æ‚æ‹¬å·ä¿ç•™
- OVSç¼–è¯‘ï¼šhello.ovs ï¿½?ï¿½?æ— è¯­æ³•é”™ï¿½?
ï¿½?å½±å“èŒƒå›´ï¿½?- æ‰€æœ‰æ‹¬å·è¡¨è¾¾å¼æ­£ç¡®ä¿ç•™
- ç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡å­—é¢é‡å®Œå…¨æ­£ï¿½?- è¿ç®—ç¬¦ä¼˜å…ˆçº§å‡†ç¡®
- computed()ã€reactive() ï¿½?Vue API æ­£å¸¸å·¥ä½œ

ï¿½?025-10-24 16:58:08ï¿½?ï¿½?025-10-24ã€‘OVS v0.2.0 - #{} ä¸æ¸²æŸ“å—åŠŸèƒ½å®Œæ•´å®ç°

ï¿½?æ ¸å¿ƒåŠŸèƒ½å®ç°ï¿½?1. #{} è¯­æ³•æ”¯æŒ - éš”ç¦»ä¸æ¸²æŸ“çš„ä»£ç 
2. æ™ºèƒ½æ¸²æŸ“ç³»ç»Ÿ - å…ƒç´ ä¼˜å…ˆã€é»˜è®¤æ¸²æŸ“ï¿½?{} éš”ç¦»
3. è‡ªåŠ¨å¯¼å‡ºä¼˜åŒ– - ç®€ï¿½?å¤æ‚è‡ªåŠ¨åˆ¤æ–­
4. ReactiveVNode é›†æˆ - å“åº”å¼æ”¯ï¿½?
ï¿½?ä¿®æ”¹æ–‡ä»¶ï¿½?- OvsParser.ts - æ·»åŠ  NoRenderBlock è§„åˆ™ï¼Œåˆ ï¿½?RenderExpression
- OvsCstToSlimeAstUtil.ts - å®ç° #{} å±•å¼€å’Œæ¸²æŸ“åˆ¤ï¿½?- index.ts - ä¼˜åŒ–å¯¼å‡ºé€»è¾‘ï¼Œæ‰€æœ‰ä»£ç åŒ…è£¹åˆ° IIFE

ï¿½?æµ‹è¯•éªŒè¯ï¿½?- åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ 13-norender-block.ovs
- æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡
- hello.ovs å®Œæ•´ç¤ºä¾‹ï¿½?10è¡Œï¼‰æ­£å¸¸ç¼–è¯‘

ï¿½?é¡µé¢å°±ç»ªï¿½?- å¼€å‘æœåŠ¡å™¨ï¼šhttp://localhost:5175
- main.ts ä½¿ç”¨ DefaultViews.map(v => v.toVnode())
- å±•ç¤º #{} åŠŸèƒ½ï¿½?ä¸ªç¤ºï¿½?
## 2025-10-24 [v0.2.0 - `#{}` ä¸æ¸²æŸ“å— + æ™ºèƒ½æ¸²æŸ“ç³»ç»Ÿ]

### ğŸ¯ æ ¸å¿ƒè®¾è®¡å˜æ›´

**è®¾è®¡å“²å­¦è½¬å˜ï¼šJavaScript æ˜¯ä¸»ä½“ï¼ŒUI æ˜¯é™„ï¿½?*

- **æ—§è®¾ï¿½?*ï¼šåªæœ‰ç‰¹å®šè¯­æ³•ï¼ˆ`#{ expr }`ï¼‰æ‰æ¸²æŸ“
- **æ–°è®¾ï¿½?*ï¼šé»˜è®¤éƒ½æ¸²æŸ“ï¼Œä½¿ï¿½?`#{}` éš”ç¦»ä¸æ¸²æŸ“çš„ä»£ç 

### ğŸ¯ æ ¸å¿ƒè®¾è®¡å˜æ›´

**è®¾è®¡å“²å­¦è½¬å˜ï¼šJavaScript æ˜¯ä¸»ä½“ï¼ŒUI æ˜¯é™„ï¿½?*

- **æ—§è®¾ï¿½?*ï¼šåªæœ‰ç‰¹å®šè¯­æ³•ï¼ˆ`#{ expr }`ï¼‰æ‰æ¸²æŸ“
- **æ–°è®¾ï¿½?*ï¼šé»˜è®¤éƒ½æ¸²æŸ“ï¼Œä½¿ï¿½?`#{}` éš”ç¦»ä¸æ¸²æŸ“çš„ä»£ç 

### ğŸ¯ æ ¸å¿ƒè®¾è®¡å˜æ›´

**è®¾è®¡å“²å­¦è½¬å˜ï¼šJavaScript æ˜¯ä¸»ä½“ï¼ŒUI æ˜¯é™„ï¿½?*

- **æ—§è®¾ï¿½?*ï¼šåªæœ‰ç‰¹å®šè¯­æ³•ï¼ˆ`#{ expr }`ï¼‰æ‰æ¸²æŸ“
- **æ–°è®¾ï¿½?*ï¼šé»˜è®¤éƒ½æ¸²æŸ“ï¼Œä½¿ï¿½?`#{}` éš”ç¦»ä¸æ¸²æŸ“çš„ä»£ç 

### âš ï¸ å¸¸è§é™·é˜±

**é™·é˜± 1: å¤šä¸ªè¡¨è¾¾å¼æ— å¯¼å‡º**
```javascript
// âŒ é”™è¯¯ï¼šä¸¤ä¸ª div éƒ½ä¸ä¼šæ¸²æŸ“åˆ°é¡µé¢
div { "First" }
div { "Second" }

// âœ… æ­£ç¡®ï¼šç”¨ export åŒ…è£¹
export const App = div {
  div { "First" }
  div { "Second" }
}
```

**é™·é˜± 2: æ··åˆå¯¼å‡ºå’Œéå¯¼å‡º**
```javascript
// âŒ é”™è¯¯ï¼šdiv { a } ä¼šè¢«ä¸¢å¼ƒ
const a = 123
div { a }
export const MyView = div { "content" }

// âœ… æ­£ç¡®ï¼šæ˜ç¡®å¯¼å‡ºæ‰€æœ‰å†…å®¹
export const App = div {
  div { a }
  div { "content" }
}
```

**é™·é˜± 3: å¿˜è®° export**
```javascript
// âŒ é”™è¯¯ï¼šä¸ä¼šå¯¼å‡ºï¼ˆå¦‚æœè¿™æ˜¯ä½ æƒ³è¦çš„è¯ï¼‰
const a = 123
div { a }

// âœ… æ­£ç¡®ï¼šæ˜¾å¼å¯¼å‡ºæˆ–ä¸å†™ä»»ä½•å¯¼å‡º
export const App = div { a }  // æˆ–
```

## ç¼–è¯‘è§„åˆ™ï¼ˆå®Œæ•´ç‰ˆï¼‰

OVS ç¼–è¯‘å™¨é‡‡ç”¨**æ™ºèƒ½å¯¼å‡ºç³»ç»Ÿ**ï¼Œæ ¹æ®ä»£ç ä¸­æ˜¯å¦å­˜åœ¨å¯¼å‡ºè¯­å¥æ¥è‡ªåŠ¨å†³å®šç¼–è¯‘ç­–ç•¥ã€‚

### ğŸ“‹ å¯¼å‡ºè§„åˆ™ä¼˜å…ˆçº§

ç¼–è¯‘å™¨æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§å¤„ç†å¯¼å‡ºï¼š

**è§„åˆ™ 1: æ˜¾å¼å¯¼å‡ºä¼˜å…ˆ**
- å¦‚æœä»£ç ä¸­æœ‰ `export default`ã€`export const` æˆ– `export function`ï¼Œåˆ™æŒ‰ç”¨æˆ·æ„å›¾å¤„ç†
- ä¿ç•™ç”¨æˆ·çš„å¯¼å‡ºç»“æ„ï¼Œä¸è¿›è¡Œä»»ä½•ä¿®æ”¹

**è§„åˆ™ 2: æ— å¯¼å‡ºæ—¶è‡ªåŠ¨åŒ…è£¹**
- å¦‚æœä»£ç ä¸­**æ²¡æœ‰ä»»ä½•å¯¼å‡ºè¯­å¥**ï¼Œè‡ªåŠ¨ç”¨ IIFE åŒ…è£¹æ‰€æœ‰é¡¶å±‚è¡¨è¾¾å¼
- ä½œä¸ºæ•´ä½“ç»„ä»¶å¯¼å‡º

**è§„åˆ™ 3: å£°æ˜å§‹ç»ˆä¿æŒé¡¶å±‚**
- å˜é‡å£°æ˜ã€å‡½æ•°å£°æ˜æ€»æ˜¯ä¿æŒåœ¨é¡¶å±‚
- ä¸ä¼šè¢«åŒ…è£¹åœ¨ IIFE å†…

---

### ğŸ¯ å…·ä½“è§„åˆ™è¯¦è§£

#### âœ… è§„åˆ™ 1: æœ‰ `export default` æ—¶

**è¾“å…¥ï¼š**
```javascript
const a = 123

export default div {
  a
  div { 456 }
}
```

**ç¼–è¯‘è¾“å‡ºï¼š**
```javascript
const a = 123;
export default createComponentVNode(div, {}, [a, createComponentVNode(div, {}, [456])])
```

**ç‰¹ç‚¹ï¼š**
- âœ… ä¿æŒåŸæ ·ï¼Œæ—  IIFE åŒ…è£¹
- âœ… ç›´æ¥è¿”å›å¯¼å‡ºå†…å®¹

---

#### âœ… è§„åˆ™ 2: æœ‰ `export const` æ—¶

**è¾“å…¥ï¼š**
```javascript
const a = 123

export const MyView = div {
  a
  div { 456 }
}
```

**ç¼–è¯‘è¾“å‡ºï¼š**
```javascript
const a = 123;
export const MyView = createComponentVNode(div, {}, [a, createComponentVNode(div, {}, [456])])
```

**ç‰¹ç‚¹ï¼š**
- âœ… åªè½¬æ¢ OVS éƒ¨åˆ†
- âœ… ä¿æŒå¯¼å‡ºç»“æ„
- âœ… æ—  IIFE åŒ…è£¹

---

#### âœ… è§„åˆ™ 3: æœ‰ `export function` æˆ– `export ovsView` æ—¶

**è¾“å…¥ 1 - ovsViewï¼š**
```javascript
const a = 123

export ovsView MyCard(state) : div {
  const { title } = state.props
  a
  div { 456 }
}
```

**ç¼–è¯‘è¾“å‡ºï¼š**
```javascript
const a = 123;
export function MyCard(state) {
  const { title } = state.props
  return createComponentVNode(div, {}, [a, createComponentVNode(div, {}, [456])])
}
```

**è¾“å…¥ 2 - ç®­å¤´å‡½æ•°ï¼š**
```javascript
export const MyCard = (state) => div {
  a
  div { 456 }
}
```

**ç¼–è¯‘è¾“å‡ºï¼š**
```javascript
export const MyCard = state => createComponentVNode(div, {}, [a, createComponentVNode(div, {}, [456])])
```

**è¾“å…¥ 3 - å‡½æ•°å£°æ˜ï¼š**
```javascript
export function MyCard(state) {
  const { title } = state.props
  div {
    a
    div { 456 }
  }
}
```

**ç¼–è¯‘è¾“å‡ºï¼š**
```javascript
export function MyCard(state) {
  const { title } = state.props
  createComponentVNode(div, {}, [a, createComponentVNode(div, {}, [456])])
}
```

**ç‰¹ç‚¹ï¼š**
- âœ… å‡½æ•°ä½“å†…ä¿ç•™æ‰€æœ‰ JavaScript ä»£ç 
- âœ… åªç¼–è¯‘å…ƒç´ éƒ¨åˆ†
- âœ… æ”¯æŒå®Œæ•´çš„å‡½æ•°é€»è¾‘

---

#### âœ… è§„åˆ™ 4: æ— å¯¼å‡ºæ—¶ - è‡ªåŠ¨ IIFE åŒ…è£¹ âœ¨ (é‡è¦)

**è¿™æ˜¯æœ€å…³é”®çš„è§„åˆ™ï¼**

**è¾“å…¥ï¼š**
```javascript
const a = 123

div {
  a
  div { 456 }
}

div {
  a
  div { 789 }
}
```

**ç¼–è¯‘è¾“å‡ºï¼š**
```javascript
import {createReactiveVNode} from '../utils/ReactiveVNode';

export default (function(){
  const a = 123;
  const children = [];
  
  // âœ… æ‰€æœ‰è¡¨è¾¾å¼éƒ½è¢«æ­£ç¡® push åˆ° children
  children.push(createComponentVNode(div, {}, [a, createComponentVNode(div, {}, [456])]));
  children.push(createComponentVNode(div, {}, [a, createComponentVNode(div, {}, [789])]));
  
  return children;
})()
```

**ç‰¹ç‚¹ï¼š**
- âœ… è‡ªåŠ¨åˆ›å»º IIFE åŒ…è£¹
- âœ… åˆ›å»º `children` æ•°ç»„æ”¶é›†æ‰€æœ‰è¡¨è¾¾å¼
- âœ… âœ¨ **æ‰€æœ‰é¡¶å±‚è¡¨è¾¾å¼éƒ½è¢« push åˆ° childrenï¼ˆv0.2.2 ä¿®å¤ï¼‰**
- âœ… è‡ªåŠ¨æ·»åŠ  `export default`
- âœ… è¿”å› `children` æ•°ç»„
- âœ… å£°æ˜ä¿æŒé¡¶å±‚ï¼ˆåœ¨ IIFE å¤–ï¼‰

**åœºæ™¯ï¼š**
- æ–‡ä»¶ä¸­æ²¡æœ‰ä»»ä½•å¯¼å‡ºè¯­å¥
- åŒ…å«å¤šä¸ªé¡¶å±‚è¡¨è¾¾å¼
- åº”è¯¥ä½œä¸ºæ•´ä½“ç»„ä»¶å¯¼å‡º

**ä¿®å¤å†å²ï¼š**
- v0.2.1ï¼šå®ç°äº†è§„åˆ™ä½†æœ‰bug - è¡¨è¾¾å¼è¿”å›å€¼æ²¡æœ‰è¢«push
- v0.2.2ï¼šâœ… ä¿®å¤ - æ‰€æœ‰è¡¨è¾¾å¼ç°åœ¨éƒ½è¢«æ­£ç¡®pushåˆ°childrenæ•°ç»„

---

#### âœ… è§„åˆ™ 5: æ··åˆå¯¼å‡º + éå¯¼å‡ºè¡¨è¾¾å¼

**è¾“å…¥ï¼š**
```javascript
const a = 123

div { a }  // éå¯¼å‡ºè¡¨è¾¾å¼

export const MyView = div {
  a
  div { 456 }
}
```

**ç¼–è¯‘è¡Œä¸ºï¼š**
- `export const MyView = div { ... }` ä½œä¸ºå‘½åå¯¼å‡º
- é¡¶å±‚çš„ `div { a }` ä¼šè¢«ä¸¢å¼ƒï¼ˆä¸åœ¨å¯¼å‡ºä¸­ï¼‰
- åªæœ‰æ˜¾å¼å¯¼å‡ºçš„å†…å®¹æ‰ä¼šè¾“å‡º

**ç‰¹ç‚¹ï¼š**
- âš ï¸ éå¯¼å‡ºçš„è¡¨è¾¾å¼è¢«å¿½ç•¥
- âœ… åªè¾“å‡ºæ˜ç¡®å¯¼å‡ºçš„å†…å®¹

---

### ğŸ“Š ç¼–è¯‘è§„åˆ™å¯¹æ¯”è¡¨

| åœºæ™¯ | è¾“å…¥ä»£ç  | ç¼–è¯‘ç»“æœ | IIFE | å¯¼å‡º | è¯´æ˜ |
|------|---------|---------|------|------|------|
| **è§„åˆ™1** | `export default div{}` | ç›´æ¥ç¼–è¯‘ | âŒ | âœ… | ä¿æŒåŸæ · |
| **è§„åˆ™2** | `export const X = div{}` | ç›´æ¥ç¼–è¯‘ | âŒ | âœ… | ä¿æŒåŸæ · |
| **è§„åˆ™3** | `export function/ovsView` | ç›´æ¥ç¼–è¯‘ | âŒ | âœ… | ä¿æŒåŸæ · |
| **è§„åˆ™4** | `div{}` (æ— å¯¼å‡º) | è‡ªåŠ¨åŒ…è£¹ | âœ… | âœ… | **è‡ªåŠ¨å¤„ç†** |
| **è§„åˆ™5** | æ··åˆå¯¼å‡º + è¡¨è¾¾å¼ | å¿½ç•¥è¡¨è¾¾å¼ | âŒ | âœ… | åªè¾“å‡ºå¯¼å‡º |

---

### ğŸ¯ ä½¿ç”¨å»ºè®®

**æœ€ä½³å®è·µï¼š**

1. **ç®€å•ç»„ä»¶** â†’ ä½¿ç”¨å‘½åå¯¼å‡º
```javascript
export const Button = (state) => button { state.props.text }
```

2. **å¤æ‚ç»„ä»¶** â†’ ä½¿ç”¨å‡½æ•°å£°æ˜
```javascript
export function Complex(state) {
  const data = process(state.props)
  div { ... }
}
```

3. **æ•´ä¸ªæ–‡ä»¶ä½œä¸ºä¸€ä¸ªç»„ä»¶** â†’ æ— å¯¼å‡ºè¯­å¥
```javascript
const title = "My App"
div { h1 { title } }
```

4. **å¤šä¸ªå¯¼å‡º** â†’ æ¯ä¸ªéƒ½æ˜¾å¼å¯¼å‡º
```javascript
export const Header = div { h1 { "Header" } }
export const Footer = div { p { "Footer" } }
```

---

**OVS é¡¹ç›®å®Œæ•´æ–‡æ¡£ | æœ€åæ›´æ–°: 2025-10-31**

---

# ğŸ“ å˜æ›´æ—¥å¿—

## v0.2.2 (2025-10-31) - ç¼–è¯‘è§„åˆ™å®Œæ•´å®ç°ä¿®å¤

### ğŸ› Bug ä¿®å¤

**ã€é‡è¦ã€‘è§„åˆ™4æ— å¯¼å‡ºè¡¨è¾¾å¼ç¼–è¯‘bug**
- é—®é¢˜ï¼šå½“ .ovs æ–‡ä»¶æ— ä»»ä½•å¯¼å‡ºè¯­å¥æ—¶ï¼Œé¡¶å±‚è¡¨è¾¾å¼çš„è¿”å›å€¼æ²¡æœ‰è¢« push åˆ° children æ•°ç»„
- å½±å“ï¼šå¯¼è‡´ç¼–è¯‘åçš„ç»„ä»¶æ— æ³•æ¸²æŸ“è¿™äº›è¡¨è¾¾å¼
- ä¿®å¤ï¼š`ovs/src/index.ts` ä¸­çš„ `wrapTopLevelExpressions` å‡½æ•°
- ä¿®å¤å†…å®¹ï¼šæ·»åŠ é€»è¾‘ï¼Œå°†æ‰€æœ‰ ExpressionStatement ç±»å‹çš„è¡¨è¾¾å¼éƒ½ push åˆ° children æ•°ç»„

**ä¿®å¤å‰ï¼š**
```javascript
// âŒ é”™è¯¯ - è¡¨è¾¾å¼è¿”å›å€¼è¢«ä¸¢å¼ƒ
createComponentVNode(div,{},[...])  
return children  // children ä¸ºç©ºï¼
```

**ä¿®å¤åï¼š**
```javascript
// âœ… æ­£ç¡® - è¡¨è¾¾å¼è¿”å›å€¼è¢« push
children.push(createComponentVNode(div,{},[...]))
return children  // children åŒ…å«æ‰€æœ‰è¡¨è¾¾å¼
```

### ğŸ“‹ å˜æ›´æ¸…å•
- âœ… ä¿®å¤ `src/index.ts` ç¬¬265-286è¡Œçš„è¡¨è¾¾å¼å¤„ç†é€»è¾‘
- âœ… æ›´æ–°ç¼–è¯‘è§„åˆ™4æ–‡æ¡£ï¼Œæ ‡è®°ä¸ºå·²ä¿®å¤
- âœ… éªŒè¯ä¿®å¤æœ‰æ•ˆæ€§ï¼ˆ2ä¸ªdivéƒ½æ­£ç¡®æ¸²æŸ“ï¼‰

### âœ¨ ç°åœ¨æ”¯æŒçš„6ç§å¯¼å‡ºæ–¹å¼
1. âœ… ç®­å¤´å‡½æ•°ç»„ä»¶
2. âœ… ovsView ç»„ä»¶  
3. âœ… å‡½æ•°å£°æ˜ç»„ä»¶
4. âœ… å‡½æ•°è¡¨è¾¾å¼ç»„ä»¶
5. âœ… å‘½åå¯¼å‡ºè§†å›¾
6. âœ… é»˜è®¤å¯¼å‡º

---
